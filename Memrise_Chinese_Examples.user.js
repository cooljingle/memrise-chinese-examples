// ==UserScript==
// @name           Memrise Chinese Examples
// @namespace      https://github.com/cooljingle
// @description    Example sentences for learning Chinese on Memrise
// @match          http://www.memrise.com/course/*/garden/*
// @match          http://www.memrise.com/garden/review/*
// @version        1.1.5
// @updateURL      https://github.com/cooljingle/memrise-chinese-examples/raw/master/Memrise_Chinese_Examples.user.js
// @downloadURL    https://github.com/cooljingle/memrise-chinese-examples/raw/master/Memrise_Chinese_Examples.user.js
// @grant          none
// ==/UserScript==

//tinyColorPicker
!function(a,b){"use strict";function c(a,c,d,f,g){if("string"==typeof c){var c=t.txt2color(c);d=c.type,n[d]=c[d],g=g!==b?g:c.alpha}else if(c)for(var h in c)a[d][h]=k(c[h]/l[d][h][1],0,1);return g!==b&&(a.alpha=+g),e(d,f?a:b)}function d(a,b,c){var d=m.options.grey,e={};return e.RGB={r:a.r,g:a.g,b:a.b},e.rgb={r:b.r,g:b.g,b:b.b},e.alpha=c,e.equivalentGrey=Math.round(d.r*a.r+d.g*a.g+d.b*a.b),e.rgbaMixBlack=i(b,{r:0,g:0,b:0},c,1),e.rgbaMixWhite=i(b,{r:1,g:1,b:1},c,1),e.rgbaMixBlack.luminance=h(e.rgbaMixBlack,!0),e.rgbaMixWhite.luminance=h(e.rgbaMixWhite,!0),m.options.customBG&&(e.rgbaMixCustom=i(b,m.options.customBG,c,1),e.rgbaMixCustom.luminance=h(e.rgbaMixCustom,!0),m.options.customBG.luminance=h(m.options.customBG,!0)),e}function e(a,b){var c,e,k,o=b||n,p=t,q=m.options,r=l,s=o.RND,u="",v="",w={hsl:"hsv",rgb:a},x=s.rgb;if("alpha"!==a){for(var y in r)if(!r[y][y]){a!==y&&(v=w[y]||"rgb",o[y]=p[v+"2"+y](o[v])),s[y]||(s[y]={}),c=o[y];for(u in c)s[y][u]=Math.round(c[u]*r[y][u][1])}x=s.rgb,o.HEX=p.RGB2HEX(x),o.equivalentGrey=q.grey.r*o.rgb.r+q.grey.g*o.rgb.g+q.grey.b*o.rgb.b,o.webSave=e=f(x,51),o.webSmart=k=f(x,17),o.saveColor=x.r===e.r&&x.g===e.g&&x.b===e.b?"web save":x.r===k.r&&x.g===k.g&&x.b===k.b?"web smart":"",o.hueRGB=t.hue2RGB(o.hsv.h),b&&(o.background=d(x,o.rgb,o.alpha))}var z,A,B,C=o.rgb,D=o.alpha,E="luminance",F=o.background;return z=i(C,{r:0,g:0,b:0},D,1),z[E]=h(z,!0),o.rgbaMixBlack=z,A=i(C,{r:1,g:1,b:1},D,1),A[E]=h(A,!0),o.rgbaMixWhite=A,q.customBG&&(B=i(C,F.rgbaMixCustom,D,1),B[E]=h(B,!0),B.WCAG2Ratio=j(B[E],F.rgbaMixCustom[E]),o.rgbaMixBGMixCustom=B,B.luminanceDelta=Math.abs(B[E]-F.rgbaMixCustom[E]),B.hueDelta=g(F.rgbaMixCustom,B,!0)),o.RGBLuminance=h(x),o.HUELuminance=h(o.hueRGB),q.convertCallback&&q.convertCallback(o,a),o}function f(a,b){var c={},d=0,e=b/2;for(var f in a)d=a[f]%b,c[f]=a[f]+(d>e?b-d:-d);return c}function g(a,b,c){return(Math.max(a.r-b.r,b.r-a.r)+Math.max(a.g-b.g,b.g-a.g)+Math.max(a.b-b.b,b.b-a.b))*(c?255:1)/765}function h(a,b){for(var c=b?1:255,d=[a.r/c,a.g/c,a.b/c],e=m.options.luminance,f=d.length;f--;)d[f]=d[f]<=.03928?d[f]/12.92:Math.pow((d[f]+.055)/1.055,2.4);return e.r*d[0]+e.g*d[1]+e.b*d[2]}function i(a,c,d,e){var f={},g=d!==b?d:1,h=e!==b?e:1,i=g+h*(1-g);for(var j in a)f[j]=(a[j]*g+c[j]*h*(1-g))/i;return f.a=i,f}function j(a,b){var c=1;return c=a>=b?(a+.05)/(b+.05):(b+.05)/(a+.05),Math.round(100*c)/100}function k(a,b,c){return a>c?c:b>a?b:a}var l={rgb:{r:[0,255],g:[0,255],b:[0,255]},hsv:{h:[0,360],s:[0,100],v:[0,100]},hsl:{h:[0,360],s:[0,100],l:[0,100]},alpha:{alpha:[0,1]},HEX:{HEX:[0,16777215]}},m={},n={},o={r:.298954,g:.586434,b:.114612},p={r:.2126,g:.7152,b:.0722},q=a.Colors=function(a){this.colors={RND:{}},this.options={color:"rgba(204, 82, 37, 0.8)",grey:o,luminance:p,valueRanges:l},r(this,a||{})},r=function(a,d){var e,f=a.options;s(a);for(var g in d)d[g]!==b&&(f[g]=d[g]);e=f.customBG,f.customBG="string"==typeof e?t.txt2color(e).rgb:e,n=c(a.colors,f.color,b,!0)},s=function(a){m!==a&&(m=a,n=a.colors)};q.prototype.setColor=function(a,d,f){return s(this),a?c(this.colors,a,d,b,f):(f!==b&&(this.colors.alpha=f),e(d))},q.prototype.setCustomBackground=function(a){return s(this),this.options.customBG="string"==typeof a?t.txt2color(a).rgb:a,c(this.colors,b,"rgb")},q.prototype.saveAsBackground=function(){return s(this),c(this.colors,b,"rgb",!0)};var t={txt2color:function(a){var b={},c=a.replace(/(?:#|\)|%)/g,"").split("("),d=(c[1]||"").split(/,\s*/),e=c[1]?c[0].substr(0,3):"rgb",f="";if(b.type=e,b[e]={},c[1])for(var g=3;g--;)f=e[g]||e.charAt(g),b[e][f]=+d[g]/l[e][f][1];else b.rgb=t.HEX2rgb(c[0]);return b.alpha=d[3]?+d[3]:1,b},RGB2HEX:function(a){return((a.r<16?"0":"")+a.r.toString(16)+(a.g<16?"0":"")+a.g.toString(16)+(a.b<16?"0":"")+a.b.toString(16)).toUpperCase()},HEX2rgb:function(a){return a=a.split(""),{r:parseInt(a[0]+a[a[3]?1:0],16)/255,g:parseInt(a[a[3]?2:1]+(a[3]||a[1]),16)/255,b:parseInt((a[4]||a[2])+(a[5]||a[2]),16)/255}},hue2RGB:function(a){var b=6*a,c=~~b%6,d=6===b?0:b-c;return{r:Math.round(255*[1,1-d,0,0,d,1][c]),g:Math.round(255*[d,1,1,1-d,0,0][c]),b:Math.round(255*[0,0,d,1,1,1-d][c])}},rgb2hsv:function(a){var b,c,d,e=a.r,f=a.g,g=a.b,h=0;return g>f&&(f=g+(g=f,0),h=-1),c=g,f>e&&(e=f+(f=e,0),h=-2/6-h,c=Math.min(f,g)),b=e-c,d=e?b/e:0,{h:1e-15>d?n&&n.hsl&&n.hsl.h||0:b?Math.abs(h+(f-g)/(6*b)):0,s:e?b/e:n&&n.hsv&&n.hsv.s||0,v:e}},hsv2rgb:function(a){var b=6*a.h,c=a.s,d=a.v,e=~~b,f=b-e,g=d*(1-c),h=d*(1-f*c),i=d*(1-(1-f)*c),j=e%6;return{r:[d,h,g,g,i,d][j],g:[i,d,d,h,g,g][j],b:[g,g,i,d,d,h][j]}},hsv2hsl:function(a){var b=(2-a.s)*a.v,c=a.s*a.v;return c=a.s?1>b?b?c/b:0:c/(2-b):0,{h:a.h,s:a.v||c?c:n&&n.hsl&&n.hsl.s||0,l:b/2}},rgb2hsl:function(a,b){var c=t.rgb2hsv(a);return t.hsv2hsl(b?c:n.hsv=c)},hsl2rgb:function(a){var b=6*a.h,c=a.s,d=a.l,e=.5>d?d*(1+c):d+c-c*d,f=d+d-e,g=e?(e-f)/e:0,h=~~b,i=b-h,j=e*g*i,k=f+j,l=e-j,m=h%6;return{r:[e,l,f,f,k,e][m],g:[k,e,e,l,f,f][m],b:[f,f,k,e,e,l][m]}}}}(window),function(a,b,c){"use strict";function d(b){return b.value||b.getAttribute("value")||a(b).css("background-color")||"#fff"}function e(a){return a=a.originalEvent&&a.originalEvent.touches?a.originalEvent.touches[0]:a,a.originalEvent?a.originalEvent:a}function f(b){return a(b.find(s.doRender)[0]||b[0])}function g(b){var c=a(this),e=c.offset(),g=a(window),i=s.gap;b?(t=f(c),q.$trigger=c,(u||h()).css({left:(u[0]._left=e.left)-((u[0]._left=u[0]._left+u[0]._width-(g.scrollLeft()+g.width()))+i>0?u[0]._left+i:0),top:(u[0]._top=e.top+c.outerHeight())-((u[0]._top=u[0]._top+u[0]._height-(g.scrollTop()+g.height()))+i>0?u[0]._top+i:0)}).show(s.animationSpeed,function(){b!==!0&&(y._width=y.width(),v._width=v.width(),v._height=v.height(),r.setColor(d(t[0])),n(!0))})):a(u).hide(s.animationSpeed,function(){t.blur(),q.$trigger=null,n(!1)})}function h(){return a("head").append('<style type="text/css">'+(s.css||I)+(s.cssAddon||"")+"</style>"),q.$UI=u=a(H).css({margin:s.margin}).appendTo("body").show(0,function(){var b=a(this);F=s.GPU&&b.css("perspective")!==c,v=a(".cp-xy-slider",this),w=a(".cp-xy-cursor",this),x=a(".cp-z-cursor",this),y=a(".cp-alpha",this).toggle(!!s.opacity),z=a(".cp-alpha-cursor",this),s.buildCallback.call(q,b),b.prepend("<div>").children().eq(0).css("width",b.children().eq(0).width()),this._width=this.offsetWidth,this._height=this.offsetHeight}).hide().on(D,".cp-xy-slider,.cp-z-slider,.cp-alpha",i)}function i(b){var c=this.className.replace(/cp-(.*?)(?:\s*|$)/,"$1").replace("-","_");b.preventDefault&&b.preventDefault(),b.returnValue=!1,t._offset=a(this).offset(),(c="xy_slider"===c?k:"z_slider"===c?l:m)(b),A.on(E,j).on(C,c)}function j(){A.off(".a")}function k(a){var b=e(a),c=b.pageX-t._offset.left,d=b.pageY-t._offset.top;r.setColor({s:c/v._width*100,v:100-d/v._height*100},"hsv"),n()}function l(a){{var b=e(a).pageY-t._offset.top;r.colors.hsv}r.setColor({h:360-b/v._height*360},"hsv"),n()}function m(a){var b=e(a).pageX-t._offset.left,c=b/y._width;r.setColor({},"rgb",c>1?1:0>c?0:c),n()}function n(a){var b=r.colors,d=b.hueRGB,e=b.RND.rgb,f=b.RND.hsl,g="#222",h="#ddd",i=t.data("colorMode"),j=1!==b.alpha,k=Math.round(100*b.alpha)/100,l=e.r+", "+e.g+", "+e.b,m="HEX"!==i||j?"rgb"===i||"HEX"===i&&j?j?"rgba("+l+", "+k+")":"rgb("+l+")":"hsl"+(j?"a(":"(")+f.h+", "+f.s+"%, "+f.l+"%"+(j?", "+k:"")+")":"#"+b.HEX,n=b.HUELuminance>.22?g:h,p=b.rgbaMixBlack.luminance>.22?g:h,q=(1-b.hsv.h)*v._height,s=b.hsv.s*v._width,u=(1-b.hsv.v)*v._height,A=k*y._width,B=F?"translate3d":"",C=t.val(),D=t[0].hasAttribute("value")&&""===C&&a!==c;v._css={backgroundColor:"rgb("+d.r+","+d.g+","+d.b+")"},w._css={transform:B+"("+s+"px, "+u+"px, 0)",left:F?"":s,top:F?"":u,borderColor:b.RGBLuminance>.22?g:h},x._css={transform:B+"(0, "+q+"px, 0)",top:F?"":q,borderColor:"transparent "+n},y._css={backgroundColor:"rgb("+l+")"},z._css={transform:B+"("+A+"px, 0, 0)",left:F?"":A,borderColor:p+" transparent"},t._css={backgroundColor:D?"":m,color:D?"":b.rgbaMixBGMixCustom.luminance>.22?g:h},t.text=D?"":C!==m?m:"",a!==c?o(a):G(o)}function o(a){v.css(v._css),w.css(w._css),x.css(x._css),y.css(y._css),z.css(z._css),s.doRender&&t.css(t._css),t.text&&t.val(t.text),s.renderCallback.call(q,t,"boolean"==typeof a?a:c)}var p,q,r,s,t,u,v,w,x,y,z,A=a(document),B="",C="touchmove.a mousemove.a pointermove.a",D="touchstart.a mousedown.a pointerdown.a",E="touchend.a mouseup.a pointerup.a",F=!1,G=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(a){a()},H='<div class="cp-color-picker"><div class="cp-z-slider"><div class="cp-z-cursor"></div></div><div class="cp-xy-slider"><div class="cp-white"></div><div class="cp-xy-cursor"></div></div><div class="cp-alpha"><div class="cp-alpha-cursor"></div></div></div>',I=".cp-color-picker{position:absolute;overflow:hidden;padding:6px 6px 0;background-color:#444;color:#bbb;font-family:Arial,Helvetica,sans-serif;font-size:12px;font-weight:400;cursor:default;border-radius:5px}.cp-color-picker>div{position:relative;overflow:hidden}.cp-xy-slider{float:left;height:128px;width:128px;margin-bottom:6px;background:linear-gradient(to right,#FFF,rgba(255,255,255,0))}.cp-white{height:100%;width:100%;background:linear-gradient(rgba(0,0,0,0),#000)}.cp-xy-cursor{position:absolute;top:0;width:10px;height:10px;margin:-5px;border:1px solid #fff;border-radius:100%;box-sizing:border-box}.cp-z-slider{float:right;margin-left:6px;height:128px;width:20px;background:linear-gradient(red 0,#f0f 17%,#00f 33%,#0ff 50%,#0f0 67%,#ff0 83%,red 100%)}.cp-z-cursor{position:absolute;margin-top:-4px;width:100%;border:4px solid #fff;border-color:transparent #fff;box-sizing:border-box}.cp-alpha{clear:both;width:100%;height:16px;margin:6px 0;background:linear-gradient(to right,#444,rgba(0,0,0,0))}.cp-alpha-cursor{position:absolute;margin-left:-4px;height:100%;border:4px solid #fff;border-color:#fff transparent;box-sizing:border-box}",J=function(a){r=this.color=new b(a),s=r.options};J.prototype={render:n,toggle:g},a.fn.colorPicker=function(b){var c=function(){};return b=a.extend({animationSpeed:150,GPU:!0,doRender:!0,customBG:"#FFF",opacity:!0,renderCallback:c,buildCallback:c,body:document.body,scrollResize:!0,gap:4},b),!q&&b.scrollResize&&a(window).on("resize.a scroll.a",function(){q.$trigger&&q.toggle.call(q.$trigger[0],!0)}),p=p?p.add(this):this,p.colorPicker=q||(q=new J(b)),B+=(B?", ":"")+this.selector,a(b.body).off(".a").on(D,function(b){var c=a(b.target);-1!==a.inArray(c.closest(B)[0],p)||c.closest(u).length||g()}).on("focus.a click.a",B,g).on("change.a",B,function(){r.setColor(this.value||"#FFF"),p.colorPicker.render(!0)}),this.each(function(){var c=d(this),e=c.split("("),g=f(a(this));g.data("colorMode",e[1]?e[0].substr(0,3):"HEX").attr("readonly",s.preventFocus),b.doRender&&g.css({"background-color":c,color:function(){return r.setColor(c).rgbaMixBGMixCustom.luminance>.22?"#222":"#ddd"}})})},a.fn.colorPicker.destroy=function(){a(q.color.options.body).off(".a"),q.toggle(!1),p=null,B=""}}(jQuery,Colors);

(function() {
    $('#left-area').append("<a data-toggle='modal' data-target='#example-settings-modal'>Example Settings</a>");

    MEMRISE.garden.boxes.load = (function() {
        var cached_function = MEMRISE.garden.boxes.load;
        return function() {
            var result = cached_function.apply(this, arguments);
            if (MEMRISE.garden.session.category.name === "Mandarin Chinese (Simplified)") {
                console.log("enabling showing of example Chinese sentences");
                enableExamples();
            }
            return result;
        };
    }());

    function enableExamples() {
        var audioPlaying,
            cachedData,
            colouredWord,
            defaultSettings = {
                "audioSpeed": 1,
                "colouring": "hsk", //hsk/tone/none
                "colours": {
                    "non-hsk": "#000000",
                    "hsk-1": "#E12E2E",
                    "hsk-2": "#EB8B2B",
                    "hsk-3": "#CFBE00",
                    "hsk-4": "#1ca10d",
                    "hsk-5": "#1D8FCC",
                    "hsk-6": "#db44df",
                    "tone-1": "#e30000",
                    "tone-2": "#02b31c",
                    "tone-3": "#1510f0",
                    "tone-4": "#8900bf",
                    "tone-5": "#777777",
                },
                "difficulty": "all",
                "flashWord": true,
                "fontSizeScaleFactor": 1.3,
                "keyBindings": {
                    "next-example-key": 46,
                    "previous-example-key": 44,
                    "example-detail-toggle-key": 47,
                    "increase-font-size-key": 43,
                    "decrease-font-size-key": 45,
                    "example-audio-key": 112
                },
                "underlineWord": true
            },
            difficulties = {
                "basic": "&degreeType=2",
                "intermediate": "&degreeType=3",
                "advanced": "&degreeType=1",
                "all": ""
            },
            exampleIndex,
            flashElement = $("#left-area").append("<div class='message'></div>").find('.message'),
            flashLoadCount = 0,
            firstTimeLoad = true,
            hskLevels = [{
                name: "HSK 1",
                words: ["爱", "八", "爸爸", "杯子", "北京", "本", "不", "不客气", "菜", "茶", "吃", "出租车", "打电话", "大", "的", "点", "电脑", "电视", "电影", "东西", "都", "读", "对不起", "多", "多少", "儿子", "二", "饭店", "飞机", "分钟", "高兴", "个", "工作", "狗", "汉语", "好", "号", "喝", "和", "很", "后面", "回", "会", "几", "家", "叫", "今天", "九", "开", "看", "看见", "块", "来", "老师", "了", "冷", "里", "六", "妈妈", "吗", "买", "猫", "没关系", "没有", "米饭", "名字", "明天", "哪", "哪儿", "那", "呢", "能", "你", "年", "女儿", "朋友", "漂亮", "苹果", "七", "前面", "钱", "请", "去", "热", "人", "认识", "三", "商店", "上", "上午", "少", "谁", "什么", "十", "时候", "是", "书", "水", "水果", "睡觉", "说", "四", "岁", "他", "她", "太", "天气", "听", "同学", "喂", "我", "我们", "五", "喜欢", "下", "下午", "下雨", "先生", "现在", "想", "小", "小姐", "些", "写", "谢谢", "星期", "学生", "学习", "学校", "一", "一点儿", "衣服", "医生", "医院", "椅子", "有", "月", "再见", "在", "怎么", "怎么样", "这", "中国", "中午", "住", "桌子", "字", "昨天", "坐", "做"]
            }, {
                name: "HSK 2",
                words: ["吧", "白", "百", "帮助", "报纸", "比", "别", "宾馆", "长", "唱歌", "出", "穿", "次", "从", "错", "打篮球", "大家", "到", "得", "等", "弟弟", "第一", "懂", "对", "对", "房间", "非常", "服务员", "高", "告诉", "哥哥", "给", "公共汽车", "公司", "贵", "过", "还", "孩子", "好吃", "黑", "红", "火车站", "机场", "鸡蛋", "件", "教室", "姐姐", "介绍", "进", "近", "就", "觉得", "咖啡", "开始", "考试", "可能", "可以", "课", "快", "快乐", "累", "离", "两", "零", "路", "旅游", "卖", "慢", "忙", "每", "妹妹", "门", "面条", "男", "您", "牛奶", "女", "旁边", "跑步", "便宜", "票", "妻子", "起床", "千", "铅笔", "晴", "去年", "让", "日", "上班", "身体", "生病", "生日", "时间", "事情", "手表", "手机", "说话", "送", "虽然", "但是", "", "它", "踢足球", "题", "跳舞", "外", "完", "玩", "晚上", "往", "为什么", "问", "问题", "西瓜", "希望", "洗", "小时", "笑", "新", "姓", "休息", "雪", "颜色", "眼睛", "羊肉", "药", "要", "也", "一起", "一下", "已经", "意思", "因为", "所以", "", "阴", "游泳", "右边", "鱼", "远", "运动", "再", "早上", "丈夫", "找", "着", "真", "正在", "知道", "准备", "走", "最", "左边"]
            }, {
                name: "HSK 3",
                words: ["阿姨", "啊", "矮", "爱好", "安静", "把", "班", "搬", "办法", "办公室", "半", "帮忙", "包", "饱", "北方", "被", "鼻子", "比较", "比赛", "笔记本", "必须", "变化", "别人", "冰箱", "不但", "而且", "", "菜单", "参加", "草", "层", "差", "超市", "衬衫", "成绩", "城市", "迟到", "除了", "船", "春", "词典", "聪明", "打扫", "打算", "带", "担心", "蛋糕", "当然", "地", "灯", "地方", "地铁", "地图", "电梯", "电子邮件", "东", "冬", "动物", "短", "段", "锻炼", "多么", "饿", "耳朵", "发", "发烧", "发现", "方便", "放", "放心", "分", "附近", "复习", "干净", "感冒", "感兴趣", "刚才", "个子", "根据", "跟", "更", "公斤", "公园", "故事", "刮风", "关", "关系", "关心", "关于", "国家", "过", "过去", "还是", "害怕", "黑板", "后来", "护照", "花", "花", "画", "坏", "欢迎", "还", "环境", "换", "黄河", "回答", "会议", "或者", "几乎", "机会", "极", "记得", "季节", "检查", "简单", "见面", "健康", "讲", "教", "角", "脚", "接", "街道", "节目", "节日", "结婚", "结束", "解决", "借", "经常", "经过", "经理", "久", "旧", "句子", "决定", "可爱", "渴", "刻", "客人", "空调", "口", "哭", "裤子", "筷子", "蓝", "老", "离开", "礼物", "历史", "脸", "练习", "辆", "聊天", "了解", "邻居", "留学", "楼", "绿", "马", "马上", "满意", "帽子", "米", "面包", "明白", "拿", "奶奶", "南", "难", "难过", "年级", "年轻", "鸟", "努力", "爬山", "盘子", "胖", "皮鞋", "啤酒", "瓶子", "其实", "其他", "奇怪", "骑", "起飞", "起来", "清楚", "请假", "秋", "裙子", "然后", "热情", "认为", "认真", "容易", "如果", "伞", "上网", "生气", "声音", "世界", "试", "瘦", "叔叔", "舒服", "树", "数学", "刷牙", "双", "水平", "司机", "太阳", "特别", "疼", "提高", "体育", "甜", "条", "同事", "同意", "头发", "突然", "图书馆", "腿", "完成", "碗", "万", "忘记", "为", "为了", "位", "文化", "西", "习惯", "洗手间", "洗澡", "夏", "先", "相信", "香蕉", "向", "像", "小心", "校长", "新闻", "新鲜", "信用卡", "行李箱", "熊猫", "需要", "选择", "要求", "爷爷", "一般", "一边", "一定", "一共", "一会儿", "一样", "一直", "以前", "音乐", "银行", "饮料", "应该", "影响", "用", "游戏", "有名", "又", "遇到", "元", "愿意", "月亮", "越", "站", "张", "长", "着急", "照顾", "照片", "照相机", "只", "只", "只有", "才", "", "中间", "中文", "终于", "种", "重要", "周末", "主要", "注意", "自己", "自行车", "总是", "嘴", "最后", "最近", "作业"]
            }, {
                name: "HSK 4",
                words: ["爱情", "安排", "安全", "按时", "按照", "百分之", "棒", "包子", "保护", "保证", "报名", "抱", "抱歉", "倍", "本来", "笨", "比如", "毕业", "遍", "标准", "表格", "表示", "表演", "表扬", "饼干", "并且", "博士", "不得不", "不管", "不过", "不仅", "部分", "擦", "猜", "材料", "参观", "餐厅", "厕所", "差不多", "长城", "长江", "尝", "场", "超过", "成功", "成为", "诚实", "乘坐", "吃惊", "重新", "抽烟", "出差", "出发", "出生", "出现", "厨房", "传真", "窗户", "词语", "从来", "粗心", "存", "错误", "答案", "打扮", "打扰", "打印", "打招呼", "打折", "打针", "大概", "大使馆", "大约", "大夫", "戴", "当", "当时", "刀", "导游", "到处", "到底", "倒", "道歉", "得意", "得", "登机牌", "等", "低", "底", "地点", "地球", "地址", "调查", "掉", "丢", "动作", "堵车", "肚子", "短信", "对话", "对面", "对于", "儿童", "而", "发生", "发展", "法律", "翻译", "烦恼", "反对", "方法", "方面", "方向", "房东", "放弃", "放暑假", "放松", "份", "丰富", "否则", "符合", "父亲", "付款", "负责", "复印", "复杂", "富", "改变", "干杯", "赶", "敢", "感动", "感觉", "感情", "感谢", "干", "刚", "高速公路", "胳膊", "各", "工资", "公里", "功夫", "共同", "购物", "够", "估计", "鼓励", "故意", "顾客", "挂", "关键", "观众", "管理", "光", "广播", "广告", "逛", "规定", "国籍", "国际", "果汁", "过程", "海洋", "害羞", "寒假", "汗", "航班", "好处", "好像", "号码", "合格", "合适", "盒子", "后悔", "厚", "互联网", "互相", "护士", "怀疑", "回忆", "活动", "活泼", "火", "获得", "积极", "积累", "基础", "激动", "及时", "即使", "计划", "记者", "技术", "既然", "继续", "寄", "加班", "加油站", "家具", "假", "价格", "坚持", "减肥", "减少", "建议", "将来", "奖金", "降低", "降落", "交", "交流", "交通", "郊区", "骄傲", "饺子", "教授", "教育", "接受", "接着", "节", "节约", "结果", "解释", "尽管", "紧张", "进行", "禁止", "京剧", "经济", "经历", "经验", "精彩", "景色", "警察", "竞争", "竟然", "镜子", "究竟", "举", "举办", "举行", "拒绝", "距离", "聚会", "开玩笑", "开心", "看法", "考虑", "烤鸭", "科学", "棵", "咳嗽", "可怜", "可是", "可惜", "客厅", "肯定", "空", "空气", "恐怕", "苦", "矿泉水", "困", "困难", "垃圾桶", "拉", "辣", "来不及", "来得及", "来自", "懒", "浪费", "浪漫", "老虎", "冷静", "礼拜天", "礼貌", "理发", "理解", "理想", "力气", "厉害", "例如", "俩", "连", "联系", "凉快", "零钱", "另外", "留", "流利", "流行", "旅行", "律师", "乱", "麻烦", "马虎", "满", "毛", "毛巾", "美丽", "梦", "迷路", "密码", "免费", "秒", "民族", "母亲", "目的", "耐心", "难道", "难受", "内", "内容", "能力", "年龄", "弄", "暖和", "偶尔", "排队", "排列", "判断", "陪", "批评", "皮肤", "脾气", "篇", "骗", "乒乓球", "平时", "破", "葡萄", "普遍", "普通话", "其次", "其中", "气候", "千万", "签证", "敲", "桥", "巧克力", "亲戚", "轻", "轻松", "情况", "穷", "区别", "取", "全部", "缺点", "缺少", "却", "确实", "然而", "热闹", "任何", "任务", "扔", "仍然", "日记", "入口", "散步", "森林", "沙发", "伤心", "商量", "稍微", "勺子", "社会", "申请", "深", "甚至", "生活", "生命", "生意", "省", "剩", "失败", "失望", "师傅", "十分", "实际", "实在", "使", "使用", "世纪", "是否", "适合", "适应", "收", "收入", "收拾", "首都", "首先", "受不了", "受到", "售货员", "输", "熟悉", "数量", "数字", "帅", "顺便", "顺利", "顺序", "说明", "硕士", "死", "速度", "塑料袋", "酸", "随便", "随着", "孙子", "所有", "台", "抬", "态度", "谈", "弹钢琴", "汤", "糖", "躺", "趟", "讨论", "讨厌", "特点", "提", "提供", "提前", "提醒", "填空", "条件", "停", "挺", "通过", "通知", "同情", "同时", "推", "推迟", "脱", "袜子", "完全", "网球", "网站", "往往", "危险", "卫生间", "味道", "温度", "文章", "污染", "无", "无聊", "无论", "误会", "西红柿", "吸引", "咸", "现金", "羡慕", "相反", "相同", "香", "详细", "响", "橡皮", "消息", "小吃", "小伙子", "小说", "笑话", "效果", "心情", "辛苦", "信封", "信息", "信心", "兴奋", "行", "醒", "幸福", "性别", "性格", "修理", "许多", "学期", "压力", "呀", "牙膏", "亚洲", "严格", "严重", "研究", "盐", "眼镜", "演出", "演员", "阳光", "养成", "样子", "邀请", "要是", "钥匙", "也许", "叶子", "页", "一切", "以", "以为", "艺术", "意见", "因此", "引起", "印象", "赢", "应聘", "永远", "勇敢", "优点", "优秀", "幽默", "尤其", "由", "由于", "邮局", "友好", "友谊", "有趣", "于是", "愉快", "与", "羽毛球", "语法", "语言", "预习", "原来", "原谅", "原因", "约会", "阅读", "云", "允许", "杂志", "咱们", "暂时", "脏", "责任", "增加", "占线", "招聘", "照", "真正", "整理", "正常", "正好", "正确", "正式", "证明", "之", "支持", "知识", "直接", "值得", "职业", "植物", "只好", "只要", "指", "至少", "质量", "重", "重点", "重视", "周围", "主意", "祝贺", "著名", "专门", "专业", "转", "赚", "准确", "准时", "仔细", "自然", "自信", "总结", "租", "最好", "尊重", "左右", "作家", "作用", "作者", "座", "座位"]
            }, {
                name: "HSK 5",
                words: ["哎", "唉", "爱护", "爱惜", "爱心", "安慰", "安装", "岸", "暗", "熬夜", "把握", "摆", "办理", "傍晚", "包裹", "包含", "包括", "薄", "宝贝", "宝贵", "保持", "保存", "保留", "保险", "报到", "报道", "报告", "报社", "抱怨", "背", "悲观", "背景", "被子", "本科", "本领", "本质", "比例", "彼此", "必然", "必要", "毕竟", "避免", "编辑", "鞭炮", "便", "辩论", "标点", "标志", "表达", "表面", "表明", "表情", "表现", "冰激凌", "病毒", "玻璃", "播放", "脖子", "博物馆", "补充", "不安", "不得了", "不断", "不见得", "不耐烦", "不然", "不如", "不要紧", "不足", "布", "步骤", "部门", "财产", "采访", "采取", "彩虹", "踩", "参考", "参与", "惭愧", "操场", "操心", "册", "测验", "曾经", "叉子", "差距", "插", "拆", "产品", "产生", "长途", "常识", "抄", "超级", "朝", "潮湿", "吵", "吵架", "炒", "车库", "车厢", "彻底", "沉默", "趁", "称", "称呼", "称赞", "成分", "成果", "成就", "成立", "成人", "成熟", "成语", "成长", "诚恳", "承担", "承认", "承受", "程度", "程序", "吃亏", "池塘", "迟早", "持续", "尺子", "翅膀", "冲", "充电器", "充分", "充满", "重复", "宠物", "抽屉", "抽象", "丑", "臭", "出版", "出口", "出色", "出示", "出席", "初级", "除非", "除夕", "处理", "传播", "传染", "传说", "传统", "窗帘", "闯", "创造", "吹", "词汇", "辞职", "此外", "次要", "刺激", "匆忙", "从此", "从而", "从前", "从事", "粗糙", "促进", "促使", "醋", "催", "存在", "措施", "答应", "达到", "打工", "打交道", "打喷嚏", "打听", "大方", "大厦", "大象", "大型", "呆", "代表", "代替", "贷款", "待遇", "担任", "单纯", "单调", "单独", "单位", "单元", "耽误", "胆小鬼", "淡", "当地", "当心", "挡", "导演", "导致", "岛屿", "倒霉", "到达", "道德", "道理", "登记", "等待", "等于", "滴", "的确", "敌人", "地道", "地理", "地区", "地毯", "地位", "地震", "递", "点心", "电池", "电台", "钓", "顶", "动画片", "冻", "洞", "豆腐", "逗", "独立", "独特", "度过", "断", "堆", "对比", "对待", "对方", "对手", "对象", "兑换", "吨", "蹲", "顿", "多亏", "多余", "朵", "躲藏", "恶劣", "耳环", "发表", "发愁", "发达", "发抖", "发挥", "发明", "发票", "发言", "罚款", "法院", "翻", "繁荣", "反而", "反复", "反应", "反映", "反正", "范围", "方", "方案", "方式", "妨碍", "仿佛", "非", "肥皂", "废话", "分别", "分布", "分配", "分手", "分析", "纷纷", "奋斗", "风格", "风景", "风俗", "风险", "疯狂", "讽刺", "否定", "否认", "扶", "服装", "幅", "辅导", "妇女", "复制", "改革", "改进", "改善", "改正", "盖", "概括", "概念", "干脆", "干燥", "赶紧", "赶快", "感激", "感受", "感想", "干活儿", "钢铁", "高档", "高级", "搞", "告别", "格外", "隔壁", "个别", "个人", "个性", "各自", "根", "根本", "工厂", "工程师", "工具", "工人", "工业", "公布", "公开", "公平", "公寓", "公元", "公主", "功能", "恭喜", "贡献", "沟通", "构成", "姑姑", "姑娘", "古代", "古典", "股票", "骨头", "鼓舞", "鼓掌", "固定", "挂号", "乖", "拐弯", "怪不得", "关闭", "观察", "观点", "观念", "官", "管子", "冠军", "光滑", "光临", "光明", "光盘", "广场", "广大", "广泛", "归纳", "规矩", "规律", "规模", "规则", "柜台", "滚", "锅", "国庆节", "国王", "果然", "果实", "过分", "过敏", "过期", "哈", "海关", "海鲜", "喊", "行业", "豪华", "好客", "好奇", "合法", "合理", "合同", "合影", "合作", "何必", "何况", "和平", "核心", "恨", "猴子", "后背", "后果", "呼吸", "忽然", "忽视", "胡说", "胡同", "壶", "蝴蝶", "糊涂", "花生", "划", "华裔", "滑", "化学", "话题", "怀念", "怀孕", "缓解", "幻想", "慌张", "黄金", "灰", "灰尘", "灰心", "挥", "恢复", "汇率", "婚礼", "婚姻", "活跃", "火柴", "伙伴", "或许", "机器", "肌肉", "基本", "激烈", "及格", "极其", "急忙", "急诊", "集合", "集体", "集中", "计算", "记录", "记忆", "纪录", "纪律", "纪念", "系领带", "寂寞", "夹子", "家庭", "家务", "家乡", "嘉宾", "甲", "假如", "假设", "假装", "价值", "驾驶", "嫁", "坚决", "坚强", "肩膀", "艰巨", "艰苦", "兼职", "捡", "剪刀", "简历", "简直", "建立", "建设", "建筑", "健身", "键盘", "讲究", "讲座", "酱油", "交换", "交际", "交往", "浇", "胶水", "角度", "狡猾", "教材", "教练", "教训", "阶段", "结实", "接触", "接待", "接近", "节省", "结构", "结合", "结论", "结账", "戒", "戒指", "届", "借口", "金属", "尽快", "尽量", "紧急", "谨慎", "尽力", "进步", "进口", "近代", "经典", "经商", "经营", "精力", "精神", "酒吧", "救", "救护车", "舅舅", "居然", "桔子", "巨大", "具备", "具体", "俱乐部", "据说", "捐", "决赛", "决心", "角色", "绝对", "军事", "均匀", "卡车", "开发", "开放", "开幕式", "开水", "砍", "看不起", "看望", "靠", "颗", "可见", "可靠", "可怕", "克", "克服", "刻苦", "客观", "课程", "空间", "空闲", "控制", "口味", "夸", "夸张", "会计", "宽", "昆虫", "扩大", "辣椒", "拦", "烂", "朗读", "劳动", "劳驾", "老百姓", "老板", "老婆", "老实", "老鼠", "姥姥", "乐观", "雷", "类型", "冷淡", "厘米", "离婚", "梨", "理论", "理由", "力量", "立即", "立刻", "利润", "利息", "利益", "利用", "连忙", "连续", "联合", "恋爱", "良好", "粮食", "亮", "了不起", "列车", "临时", "灵活", "铃", "零件", "零食", "领导", "领域", "浏览", "流传", "流泪", "龙", "漏", "陆地", "陆续", "录取", "录音", "轮流", "论文", "逻辑", "落后", "骂", "麦克风", "馒头", "满足", "毛病", "矛盾", "冒险", "贸易", "眉毛", "媒体", "煤炭", "美术", "魅力", "梦想", "秘密", "秘书", "密切", "蜜蜂", "面对", "面积", "面临", "苗条", "描写", "敏感", "名牌", "名片", "名胜古迹", "明确", "明显", "明星", "命令", "命运", "摸", "模仿", "模糊", "模特", "摩托车", "陌生", "某", "木头", "目标", "目录", "目前", "哪怕", "难怪", "难免", "脑袋", "内部", "内科", "嫩", "能干", "能源", "嗯", "年代", "年纪", "念", "宁可", "牛仔裤", "农村", "农民", "农业", "浓", "女士", "欧洲", "偶然", "拍", "派", "盼望", "培训", "培养", "赔偿", "佩服", "配合", "盆", "碰", "批", "批准", "披", "疲劳", "匹", "片", "片面", "飘", "拼音", "频道", "平", "平安", "平常", "平等", "平方", "平衡", "平静", "平均", "评价", "凭", "迫切", "破产", "破坏", "期待", "期间", "其余", "奇迹", "企业", "启发", "气氛", "汽油", "谦虚", "签", "前途", "浅", "欠", "枪", "强调", "强烈", "墙", "抢", "悄悄", "瞧", "巧妙", "切", "亲爱", "亲切", "亲自", "勤奋", "青", "青春", "青少年", "轻视", "轻易", "清淡", "情景", "情绪", "请求", "庆祝", "球迷", "趋势", "取消", "娶", "去世", "圈", "权力", "权利", "全面", "劝", "缺乏", "确定", "确认", "群", "燃烧", "绕", "热爱", "热烈", "热心", "人才", "人口", "人类", "人民币", "人生", "人事", "人物", "人员", "忍不住", "日常", "日程", "日历", "日期", "日用品", "日子", "如何", "如今", "软", "软件", "弱", "洒", "嗓子", "色彩", "杀", "沙漠", "沙滩", "傻", "晒", "删除", "闪电", "扇子", "善良", "善于", "伤害", "商品", "商务", "商业", "上当", "蛇", "舍不得", "设备", "设计", "设施", "射击", "摄影", "伸", "身材", "身份", "深刻", "神话", "神秘", "升", "生产", "生动", "生长", "声调", "绳子", "省略", "胜利", "失眠", "失去", "失业", "诗", "狮子", "湿润", "石头", "时差", "时代", "时刻", "时髦", "时期", "时尚", "实话", "实践", "实习", "实现", "实验", "实用", "食物", "使劲儿", "始终", "士兵", "市场", "似的", "事实", "事物", "事先", "试卷", "收获", "收据", "手工", "手术", "手套", "手续", "手指", "首", "寿命", "受伤", "书架", "梳子", "舒适", "输入", "蔬菜", "熟练", "属于", "鼠标", "数", "数据", "数码", "摔倒", "甩", "双方", "税", "说不定", "说服", "丝绸", "丝毫", "私人", "思考", "思想", "撕", "似乎", "搜索", "宿舍", "随身", "随时", "随手", "碎", "损失", "缩短", "所", "锁", "台阶", "太极拳", "太太", "谈判", "坦率", "烫", "逃", "逃避", "桃", "淘气", "讨价还价", "套", "特色", "特殊", "特征", "疼爱", "提倡", "提纲", "提问", "题目", "体会", "体贴", "体现", "体验", "天空", "天真", "调皮", "调整", "挑战", "通常", "统一", "痛苦", "痛快", "偷", "投入", "投资", "透明", "突出", "土地", "土豆", "吐", "兔子", "团", "推辞", "推广", "推荐", "退", "退步", "退休", "歪", "外公", "外交", "完美", "完善", "完整", "玩具", "万一", "王子", "网络", "往返", "危害", "威胁", "微笑", "违反", "围巾", "围绕", "唯一", "维修", "伟大", "尾巴", "委屈", "未必", "未来", "位于", "位置", "胃", "胃口", "温暖", "温柔", "文件", "文具", "文明", "文学", "文字", "闻", "吻", "稳定", "问候", "卧室", "握手", "屋子", "无奈", "无数", "无所谓", "武术", "勿", "物理", "物质", "雾", "吸取", "吸收", "戏剧", "系", "系统", "细节", "瞎", "下载", "吓", "夏令营", "鲜艳", "显得", "显然", "显示", "县", "现代", "现实", "现象", "限制", "相处", "相当", "相对", "相关", "相似", "香肠", "享受", "想念", "想象", "项", "项链", "项目", "象棋", "象征", "消费", "消化", "消极", "消失", "销售", "小麦", "小气", "孝顺", "效率", "歇", "斜", "写作", "血", "心理", "心脏", "欣赏", "信号", "信任", "行动", "行人", "行为", "形成", "形容", "形式", "形势", "形象", "形状", "幸亏", "幸运", "性质", "兄弟", "胸", "休闲", "修改", "虚心", "叙述", "宣布", "宣传", "学历", "学术", "学问", "寻找", "询问", "训练", "迅速", "押金", "牙齿", "延长", "严肃", "演讲", "宴会", "阳台", "痒", "样式", "腰", "摇", "咬", "要不", "业务", "业余", "夜", "一辈子", "一旦", "一律", "一再", "一致", "依然", "移动", "移民", "遗憾", "疑问", "乙", "以及", "以来", "亿", "义务", "议论", "意外", "意义", "因而", "因素", "银", "印刷", "英俊", "英雄", "迎接", "营养", "营业", "影子", "应付", "应用", "硬", "硬件", "拥抱", "拥挤", "勇气", "用功", "用途", "优惠", "优美", "优势", "悠久", "犹豫", "油炸", "游览", "有利", "幼儿园", "娱乐", "与其", "语气", "玉米", "预报", "预订", "预防", "元旦", "员工", "原料", "原则", "圆", "愿望", "乐器", "晕", "运气", "运输", "运用", "灾害", "再三", "在乎", "在于", "赞成", "赞美", "糟糕", "造成", "则", "责备", "摘", "窄", "粘贴", "展开", "展览", "占", "战争", "长辈", "涨", "掌握", "账户", "招待", "着火", "着凉", "召开", "照常", "哲学", "针对", "珍惜", "真实", "诊断", "阵", "振动", "争论", "争取", "征求", "睁", "整个", "整齐", "整体", "正", "证件", "证据", "政府", "政治", "挣", "支", "支票", "执照", "直", "指导", "指挥", "至今", "至于", "志愿者", "制定", "制度", "制造", "制作", "治疗", "秩序", "智慧", "中介", "中心", "中旬", "种类", "重大", "重量", "周到", "猪", "竹子", "逐步", "逐渐", "主持", "主动", "主观", "主人", "主任", "主题", "主席", "主张", "煮", "注册", "祝福", "抓", "抓紧", "专家", "专心", "转变", "转告", "装", "装饰", "装修", "状况", "状态", "撞", "追", "追求", "咨询", "姿势", "资格", "资金", "资料", "资源", "紫", "自从", "自动", "自豪", "自觉", "自私", "自由", "自愿", "字母", "字幕", "综合", "总裁", "总共", "总理", "总算", "总统", "总之", "阻止", "组", "组成", "组合", "组织", "最初", "醉", "尊敬", "遵守", "作品", "作为", "作文"]
            }, {
                name: "HSK 6",
                words: ["挨", "癌症", "爱不释手", "爱戴", "暧昧", "安宁", "安详", "安置", "按摩", "案件", "案例", "暗示", "昂贵", "凹凸", "熬", "奥秘", "巴不得", "巴结", "扒", "疤", "拔苗助长", "把关", "把手", "罢工", "霸道", "掰", "摆脱", "败坏", "拜访", "拜年", "拜托", "颁布", "颁发", "斑", "版本", "半途而废", "扮演", "伴侣", "伴随", "绑架", "榜样", "磅", "包庇", "包袱", "包围", "包装", "饱和", "饱经沧桑", "保管", "保密", "保姆", "保守", "保卫", "保养", "保障", "保重", "报仇", "报酬", "报答", "报复", "报警", "报销", "抱负", "暴力", "暴露", "曝光", "爆发", "爆炸", "卑鄙", "悲哀", "悲惨", "北极", "贝壳", "备份", "备忘录", "背叛", "背诵", "被动", "被告", "奔波", "奔驰", "本能", "本钱", "本人", "本身", "本事", "笨拙", "崩溃", "甭", "迸发", "蹦", "逼迫", "鼻涕", "比方", "比喻", "比重", "鄙视", "闭塞", "弊病", "弊端", "臂", "边疆", "边界", "边境", "边缘", "编织", "鞭策", "贬低", "贬义", "扁", "变故", "变迁", "变质", "便利", "便条", "便于", "遍布", "辨认", "辩护", "辩解", "辩证", "辫子", "标本", "标记", "标题", "表决", "表态", "表彰", "憋", "别墅", "别致", "别扭", "濒临", "冰雹", "丙", "并非", "并列", "拨", "波浪", "波涛", "剥削", "播种", "伯母", "博大精深", "博览会", "搏斗", "薄弱", "补偿", "补救", "补贴", "捕捉", "哺乳", "不得已", "不妨", "不敢当", "不顾", "不禁", "不堪", "不可思议", "不愧", "不料", "不免", "不时", "不惜", "不相上下", "不像话", "不屑一顾", "不言而喻", "不由得", "不择手段", "不止", "布告", "布局", "布置", "步伐", "部署", "部位", "才干", "财富", "财务", "财政", "裁缝", "裁判", "裁员", "采购", "采集", "采纳", "彩票", "参谋", "参照", "残疾", "残酷", "残留", "残忍", "灿烂", "仓促", "仓库", "苍白", "舱", "操劳", "操练", "操纵", "操作", "嘈杂", "草案", "草率", "侧面", "测量", "策划", "策略", "层出不穷", "层次", "差别", "插座", "查获", "岔", "刹那", "诧异", "柴油", "搀", "馋", "缠绕", "产业", "阐述", "颤抖", "昌盛", "尝试", "偿还", "场合", "场面", "场所", "敞开", "畅通", "畅销", "倡导", "倡议", "钞票", "超越", "巢穴", "朝代", "嘲笑", "潮流", "撤退", "撤销", "沉淀", "沉闷", "沉思", "沉重", "沉着", "陈旧", "陈列", "陈述", "衬托", "称心如意", "称号", "成本", "成交", "成天", "成效", "成心", "成员", "呈现", "诚挚", "承办", "承包", "承诺", "城堡", "乘", "盛", "惩罚", "澄清", "橙", "秤", "吃苦", "吃力", "迟钝", "迟缓", "迟疑", "持久", "赤道", "赤字", "冲动", "冲击", "冲突", "充当", "充沛", "充实", "充足", "重叠", "崇拜", "崇高", "崇敬", "稠密", "筹备", "丑恶", "出路", "出卖", "出身", "出神", "出息", "初步", "除", "处分", "处境", "处置", "储备", "储存", "储蓄", "触犯", "川流不息", "穿越", "传达", "传单", "传授", "船舶", "喘气", "串", "床单", "创立", "创新", "创业", "创作", "吹牛", "吹捧", "炊烟", "垂直", "锤", "纯粹", "纯洁", "慈善", "慈祥", "磁带", "雌雄", "次品", "次序", "伺候", "刺", "从容", "丛", "凑合", "粗鲁", "窜", "摧残", "脆弱", "搓", "磋商", "挫折", "搭", "搭档", "搭配", "达成", "答辩", "答复", "打包", "打官司", "打击", "打架", "打量", "打猎", "打仗", "大不了", "大臣", "大伙儿", "大肆", "大体", "大意", "大致", "歹徒", "代价", "代理", "带领", "怠慢", "逮捕", "担保", "胆怯", "诞辰", "诞生", "淡季", "淡水", "蛋白质", "当场", "当初", "当代", "当面", "当前", "当事人", "当务之急", "当选", "党", "档案", "档次", "导弹", "导航", "导向", "捣乱", "倒闭", "盗窃", "稻谷", "得不偿失", "得力", "得天独厚", "得罪", "灯笼", "登陆", "登录", "蹬", "等候", "等级", "瞪", "堤坝", "敌视", "抵达", "抵抗", "抵制", "地步", "地势", "地质", "递增", "颠簸", "颠倒", "典礼", "典型", "点缀", "电源", "垫", "惦记", "奠定", "叼", "雕刻", "雕塑", "吊", "调动", "跌", "丁", "叮嘱", "盯", "定期", "定义", "丢人", "丢三落四", "东道主", "东张西望", "董事长", "动荡", "动机", "动静", "动力", "动脉", "动身", "动手", "动态", "动员", "冻结", "栋", "兜", "陡峭", "斗争", "督促", "毒品", "独裁", "堵塞", "赌博", "杜绝", "端", "端午节", "端正", "短促", "断定", "断绝", "堆积", "队伍", "对策", "对称", "对付", "对抗", "对立", "对联", "对应", "对照", "兑现", "顿时", "多元化", "哆嗦", "堕落", "额外", "恶心", "恶化", "遏制", "恩怨", "而已", "二氧化碳", "发布", "发财", "发呆", "发动", "发觉", "发射", "发誓", "发行", "发炎", "发扬", "发育", "法人", "番", "凡是", "繁华", "繁忙", "繁体字", "繁殖", "反驳", "反常", "反感", "反抗", "反馈", "反面", "反射", "反思", "反问", "反之", "泛滥", "范畴", "贩卖", "方位", "方言", "方圆", "方针", "防守", "防御", "防止", "防治", "访问", "纺织", "放大", "放射", "飞禽走兽", "飞翔", "飞跃", "非法", "肥沃", "诽谤", "肺", "废除", "废寝忘食", "废墟", "沸腾", "分辨", "分寸", "分红", "分解", "分裂", "分泌", "分明", "分歧", "分散", "吩咐", "坟墓", "粉末", "粉色", "粉碎", "分量", "愤怒", "丰满", "丰盛", "丰收", "风暴", "风度", "风光", "风气", "风趣", "风土人情", "风味", "封闭", "封建", "封锁", "锋利", "逢", "奉献", "否决", "夫妇", "夫人", "敷衍", "服从", "服气", "俘虏", "符号", "幅度", "辐射", "福利", "福气", "抚摸", "抚养", "俯视", "辅助", "腐败", "腐烂", "腐蚀", "腐朽", "负担", "附和", "附件", "附属", "复活", "复兴", "副", "赋予", "富裕", "腹泻", "覆盖", "改良", "钙", "盖章", "干旱", "干扰", "干涉", "干预", "尴尬", "感慨", "感染", "干劲", "纲领", "岗位", "港口", "港湾", "杠杆", "高超", "高潮", "高峰", "高明", "高尚", "高涨", "稿件", "告辞", "告诫", "疙瘩", "鸽子", "搁", "割", "歌颂", "革命", "格局", "格式", "隔阂", "隔离", "个体", "各抒己见", "根深蒂固", "根源", "跟前", "跟随", "跟踪", "更新", "更正", "耕地", "工艺品", "公安局", "公道", "公告", "公关", "公民", "公然", "公认", "公式", "公务", "公正", "公证", "功劳", "功效", "攻击", "攻克", "供不应求", "供给", "宫殿", "恭敬", "巩固", "共和国", "共计", "共鸣", "勾结", "钩子", "构思", "孤独", "孤立", "姑且", "辜负", "古董", "古怪", "股东", "股份", "骨干", "鼓动", "固然", "固体", "固有", "固执", "故乡", "故障", "顾虑", "顾问", "雇佣", "拐杖", "关怀", "关照", "观光", "官方", "管辖", "贯彻", "惯例", "灌溉", "罐", "光彩", "光辉", "光芒", "光荣", "广阔", "归根到底", "归还", "规范", "规格", "规划", "规章", "轨道", "贵族", "跪", "棍棒", "国防", "国务院", "果断", "过度", "过渡", "过奖", "过滤", "过失", "过问", "过瘾", "过于", "嗨", "海拔", "海滨", "含糊", "含义", "寒暄", "罕见", "捍卫", "行列", "航空", "航天", "航行", "毫米", "毫无", "豪迈", "号召", "耗费", "呵", "合并", "合成", "合伙", "合算", "和蔼", "和解", "和睦", "和气", "和谐", "嘿", "痕迹", "狠心", "恨不得", "横", "哼", "轰动", "烘", "宏观", "宏伟", "洪水", "哄", "喉咙", "吼", "后代", "后顾之忧", "后勤", "候选", "呼唤", "呼啸", "呼吁", "忽略", "胡乱", "胡须", "湖泊", "花瓣", "花蕾", "华丽", "华侨", "化肥", "化石", "化验", "化妆", "划分", "画蛇添足", "话筒", "欢乐", "还原", "环节", "缓和", "患者", "荒凉", "荒谬", "荒唐", "皇帝", "皇后", "黄昏", "恍然大悟", "晃", "挥霍", "辉煌", "回报", "回避", "回顾", "回收", "悔恨", "毁灭", "汇报", "会晤", "贿赂", "昏迷", "荤", "浑身", "混合", "混乱", "混淆", "混浊", "活该", "活力", "火箭", "火焰", "火药", "货币", "讥笑", "饥饿", "机动", "机构", "机灵", "机密", "机械", "机遇", "机智", "基地", "基金", "基因", "激发", "激励", "激情", "及早", "吉祥", "级别", "极端", "极限", "即便", "即将", "急功近利", "急剧", "急切", "急于求成", "急躁", "疾病", "集团", "嫉妒", "籍贯", "给予", "计较", "记性", "记载", "纪要", "技巧", "忌讳", "季度", "季军", "迹象", "继承", "寄托", "寂静", "加工", "加剧", "夹杂", "佳肴", "家常", "家伙", "家属", "家喻户晓", "尖端", "尖锐", "坚定", "坚固", "坚韧", "坚实", "坚硬", "艰难", "监督", "监视", "监狱", "煎", "拣", "检讨", "检验", "剪彩", "简化", "简陋", "简体字", "简要", "见多识广", "见解", "见闻", "见义勇为", "间谍", "间隔", "间接", "剑", "健全", "舰艇", "践踏", "溅", "鉴别", "鉴定", "鉴于", "将近", "将就", "将军", "僵硬", "奖励", "奖赏", "桨", "降临", "交叉", "交代", "交涉", "交易", "娇气", "焦点", "焦急", "角落", "侥幸", "搅拌", "缴纳", "较量", "教养", "阶层", "皆", "接连", "揭露", "节制", "节奏", "杰出", "结晶", "结局", "结算", "截止", "截至", "竭尽全力", "解除", "解放", "解雇", "解剖", "解散", "解体", "戒备", "界限", "借鉴", "借助", "金融", "津津有味", "紧迫", "锦上添花", "进而", "进攻", "进化", "进展", "近来", "晋升", "浸泡", "茎", "经费", "经纬", "惊动", "惊奇", "惊讶", "兢兢业业", "精打细算", "精华", "精简", "精密", "精确", "精通", "精心", "精益求精", "精致", "井", "颈椎", "警告", "警惕", "竞赛", "竞选", "敬礼", "敬业", "境界", "镜头", "纠纷", "纠正", "酒精", "救济", "就近", "就业", "就职", "拘留", "拘束", "居民", "居住", "鞠躬", "局部", "局面", "局势", "局限", "咀嚼", "沮丧", "举动", "举世瞩目", "举足轻重", "剧本", "剧烈", "据悉", "聚精会神", "卷", "决策", "觉悟", "觉醒", "绝望", "倔强", "军队", "君子", "卡通", "开采", "开除", "开阔", "开朗", "开明", "开辟", "开拓", "开展", "开支", "刊登", "刊物", "勘探", "侃侃而谈", "砍伐", "看待", "慷慨", "扛", "抗议", "考察", "考古", "考核", "考验", "靠拢", "科目", "磕", "可观", "可口", "可恶", "可行", "渴望", "克制", "刻不容缓", "客户", "课题", "恳切", "啃", "坑", "空洞", "空前绝后", "空想", "空虚", "孔", "恐怖", "恐吓", "恐惧", "空白", "空隙", "口气", "口腔", "口头", "口音", "扣", "枯萎", "枯燥", "哭泣", "苦尽甘来", "苦涩", "挎", "跨", "快活", "宽敞", "宽容", "款待", "款式", "筐", "旷课", "况且", "矿产", "框架", "亏待", "亏损", "捆绑", "扩充", "扩散", "扩张", "喇叭", "蜡烛", "啦", "来历", "来源", "栏目", "懒惰", "狼狈", "狼吞虎咽", "捞", "牢固", "牢骚", "唠叨", "乐趣", "乐意", "雷达", "类似", "冷酷", "冷落", "冷却", "愣", "黎明", "礼节", "礼尚往来", "里程碑", "理睬", "理所当然", "理直气壮", "理智", "力求", "力所能及", "力争", "历代", "历来", "立场", "立方", "立交桥", "立体", "立足", "利害", "例外", "粒", "连年", "连锁", "连同", "联欢", "联络", "联盟", "联想", "廉洁", "良心", "谅解", "晾", "辽阔", "列举", "临床", "淋", "吝啬", "伶俐", "灵感", "灵魂", "灵敏", "凌晨", "零星", "领会", "领事馆", "领土", "领悟", "领先", "领袖", "溜", "留恋", "留念", "留神", "流浪", "流露", "流氓", "流通", "聋哑", "隆重", "垄断", "笼罩", "搂", "炉灶", "屡次", "履行", "掠夺", "轮船", "轮廓", "轮胎", "论坛", "论证", "啰唆", "络绎不绝", "落成", "落实", "麻痹", "麻木", "麻醉", "码头", "蚂蚁", "嘛", "埋伏", "埋没", "埋葬", "迈", "脉搏", "埋怨", "蔓延", "漫长", "漫画", "慢性", "忙碌", "盲目", "茫茫", "茫然", "茂盛", "冒充", "冒犯", "枚", "媒介", "美观", "美满", "美妙", "萌芽", "猛烈", "眯", "弥补", "弥漫", "迷惑", "迷人", "迷信", "谜语", "密度", "密封", "棉花", "免得", "免疫", "勉励", "勉强", "面貌", "面子", "描绘", "瞄准", "渺小", "藐视", "灭亡", "蔑视", "民间", "民主", "敏捷", "敏锐", "名次", "名额", "名副其实", "名誉", "明明", "明智", "命名", "摸索", "模范", "模式", "模型", "膜", "摩擦", "磨合", "魔鬼", "魔术", "抹杀", "莫名其妙", "墨水儿", "默默", "谋求", "模样", "母语", "目睹", "目光", "沐浴", "拿手", "纳闷儿", "耐用", "南辕北辙", "难得", "难堪", "难能可贵", "恼火", "内涵", "内幕", "内在", "能量", "拟定", "逆行", "年度", "捏", "凝固", "凝聚", "凝视", "拧", "宁肯", "宁愿", "扭转", "纽扣儿", "农历", "浓厚", "奴隶", "虐待", "挪", "哦", "殴打", "呕吐", "偶像", "趴", "排斥", "排除", "排放", "排练", "徘徊", "派别", "派遣", "攀登", "盘旋", "判决", "畔", "庞大", "抛弃", "泡沫", "培育", "配备", "配偶", "配套", "盆地", "烹饪", "捧", "批发", "批判", "劈", "皮革", "疲惫", "疲倦", "屁股", "譬如", "偏差", "偏见", "偏僻", "偏偏", "片断", "片刻", "漂浮", "飘扬", "撇", "拼搏", "拼命", "贫乏", "贫困", "频繁", "频率", "品尝", "品德", "品质", "品种", "平凡", "平面", "平坦", "平行", "平庸", "平原", "评估", "评论", "屏幕", "屏障", "坡", "泼", "颇", "迫不及待", "迫害", "破例", "魄力", "扑", "铺", "朴实", "朴素", "普及", "瀑布", "凄凉", "期望", "期限", "欺负", "欺骗", "齐全", "齐心协力", "奇妙", "歧视", "旗袍", "旗帜", "乞丐", "岂有此理", "企图", "启程", "启蒙", "启示", "启事", "起草", "起初", "起伏", "起哄", "起码", "起源", "气概", "气功", "气魄", "气色", "气势", "气味", "气象", "气压", "气质", "迄今为止", "器材", "器官", "掐", "洽谈", "恰当", "恰到好处", "恰巧", "千方百计", "迁就", "迁徙", "牵", "牵扯", "牵制", "谦逊", "签署", "前景", "前提", "潜力", "潜水", "潜移默化", "谴责", "强制", "抢劫", "抢救", "强迫", "桥梁", "窍门", "翘", "切实", "锲而不舍", "钦佩", "侵犯", "侵略", "亲密", "亲热", "勤俭", "勤劳", "倾听", "倾向", "倾斜", "清澈", "清晨", "清除", "清洁", "清理", "清晰", "清醒", "清真", "情报", "情节", "情理", "情形", "晴朗", "请柬", "请教", "请示", "请帖", "丘陵", "区分", "区域", "曲折", "驱逐", "屈服", "渠道", "曲子", "取缔", "趣味", "圈套", "权衡", "权威", "全局", "全力以赴", "拳头", "犬", "缺口", "缺席", "缺陷", "瘸", "确保", "确立", "确切", "确信", "群众", "染", "嚷", "让步", "饶恕", "扰乱", "惹祸", "热泪盈眶", "热门", "人道", "人格", "人工", "人家", "人间", "人士", "人为", "人性", "人质", "仁慈", "忍耐", "忍受", "认定", "认可", "任命", "任性", "任意", "任重道远", "仍旧", "日新月异", "日益", "荣幸", "荣誉", "容貌", "容纳", "容器", "容忍", "溶解", "融化", "融洽", "柔和", "揉", "儒家", "若干", "弱点", "撒谎", "散文", "散布", "散发", "丧失", "骚扰", "嫂子", "刹车", "啥", "筛选", "山脉", "闪烁", "擅长", "擅自", "伤脑筋", "商标", "上级", "上进", "上任", "上瘾", "上游", "尚且", "捎", "梢", "哨", "奢侈", "舌头", "设立", "设想", "设置", "社区", "涉及", "摄氏度", "申报", "呻吟", "绅士", "深奥", "深沉", "深情厚谊", "神经", "神奇", "神气", "神圣", "神态", "神仙", "审查", "审理", "审美", "审判", "渗透", "慎重", "生存", "生机", "生理", "生疏", "生态", "生物", "生肖", "生效", "生锈", "生育", "声明", "声势", "声誉", "牲畜", "省会", "胜负", "盛产", "盛开", "盛情", "盛行", "尸体", "失事", "失误", "失踪", "师范", "施加", "施展", "十足", "石油", "时常", "时而", "时光", "时机", "时事", "识别", "实惠", "实力", "实施", "实事求是", "实行", "实质", "拾", "使命", "示范", "示威", "示意", "世代", "势必", "势力", "事故", "事迹", "事件", "事态", "事务", "事项", "事业", "试图", "试验", "视力", "视频", "视线", "视野", "是非", "适宜", "逝世", "释放", "收藏", "收缩", "收益", "收音机", "手法", "手势", "手艺", "守护", "首饰", "首要", "受罪", "授予", "书法", "书籍", "书记", "书面", "舒畅", "疏忽", "疏远", "束", "束缚", "树立", "竖", "数额", "耍", "衰老", "衰退", "率领", "涮火锅", "双胞胎", "爽快", "水利", "水龙头", "水泥", "瞬间", "司法", "司令", "私自", "思念", "思索", "思维", "斯文", "死亡", "四肢", "寺庙", "饲养", "肆无忌惮", "耸", "艘", "苏醒", "俗话", "诉讼", "素食", "素质", "塑造", "算数", "随即", "随意", "岁月", "隧道", "损坏", "索取", "索性", "塌", "踏实", "塔", "台风", "太空", "泰斗", "贪婪", "贪污", "摊", "瘫痪", "弹性", "坦白", "叹气", "探测", "探索", "探讨", "探望", "倘若", "掏", "滔滔不绝", "陶瓷", "陶醉", "淘汰", "讨好", "特长", "特定", "特意", "提拔", "提炼", "提示", "提议", "题材", "体裁", "体积", "体谅", "体面", "体系", "天才", "天赋", "天伦之乐", "天然气", "天生", "天堂", "天文", "田径", "田野", "舔", "挑剔", "条款", "条理", "条约", "调和", "调剂", "调节", "调解", "调料", "挑拨", "挑衅", "跳跃", "亭子", "停泊", "停顿", "停滞", "挺拔", "通货膨胀", "通缉", "通俗", "通讯", "通用", "同胞", "同志", "铜", "童话", "统筹兼顾", "统计", "统统", "统治", "投机", "投票", "投诉", "投降", "投掷", "透露", "秃", "突破", "图案", "徒弟", "途径", "涂抹", "土壤", "团结", "团体", "团圆", "推测", "推翻", "推理", "推论", "推销", "吞吞吐吐", "托运", "拖延", "脱离", "妥当", "妥善", "妥协", "椭圆", "唾弃", "挖掘", "哇", "娃娃", "瓦解", "歪曲", "外表", "外行", "外界", "外向", "丸", "完备", "完毕", "玩弄", "玩意儿", "顽固", "顽强", "挽回", "挽救", "惋惜", "万分", "往常", "往事", "妄想", "危机", "威风", "威力", "威望", "威信", "微不足道", "微观", "为难", "为期", "违背", "唯独", "维持", "维护", "维生素", "伪造", "委托", "委员", "卫星", "未免", "畏惧", "喂", "蔚蓝", "慰问", "温带", "温和", "文凭", "文物", "文献", "文雅", "文艺", "问世", "窝", "乌黑", "污蔑", "诬陷", "无比", "无偿", "无耻", "无动于衷", "无非", "无辜", "无精打采", "无赖", "无理取闹", "无能为力", "无穷无尽", "无微不至", "无忧无虑", "无知", "武器", "武侠", "武装", "侮辱", "舞蹈", "务必", "物美价廉", "物业", "物资", "误差", "误解", "夕阳", "昔日", "牺牲", "溪", "熄灭", "膝盖", "习俗", "袭击", "媳妇", "喜闻乐见", "喜悦", "系列", "细胞", "细菌", "细致", "峡谷", "狭隘", "狭窄", "霞", "下属", "先进", "先前", "纤维", "掀起", "鲜明", "闲话", "贤惠", "弦", "衔接", "嫌", "嫌疑", "显著", "现场", "现成", "现状", "线索", "宪法", "陷害", "陷阱", "陷入", "馅儿", "乡镇", "相差", "相等", "相辅相成", "相应", "镶嵌", "响亮", "响应", "想方设法", "向导", "向来", "向往", "巷", "相声", "削", "消除", "消毒", "消防", "消耗", "消灭", "销毁", "潇洒", "小心翼翼", "肖像", "效益", "协会", "协商", "协调", "协议", "协助", "携带", "泄露", "泄气", "屑", "谢绝", "心得", "心甘情愿", "心灵", "心态", "心疼", "心血", "心眼儿", "辛勤", "欣慰", "欣欣向荣", "新陈代谢", "新郎", "新娘", "新颖", "薪水", "信赖", "信念", "信仰", "信誉", "兴隆", "兴旺", "腥", "刑事", "行政", "形态", "兴高采烈", "兴致勃勃", "性感", "性命", "性能", "凶恶", "凶手", "汹涌", "胸怀", "胸膛", "雄厚", "雄伟", "修复", "修建", "修养", "羞耻", "绣", "嗅觉", "须知", "虚假", "虚荣", "虚伪", "需求", "许可", "序言", "畜牧", "酗酒", "宣誓", "宣扬", "喧哗", "悬挂", "悬念", "悬殊", "悬崖峭壁", "旋律", "旋转", "选拔", "选举", "选手", "炫耀", "削弱", "学说", "学位", "雪上加霜", "血压", "熏陶", "寻觅", "巡逻", "循环", "循序渐进", "压迫", "压岁钱", "压缩", "压抑", "压榨", "压制", "鸦雀无声", "亚军", "烟花爆竹", "淹没", "延期", "延伸", "延续", "严寒", "严禁", "严峻", "严厉", "严密", "言论", "岩石", "炎热", "沿海", "掩盖", "掩护", "掩饰", "眼光", "眼色", "眼神", "演变", "演习", "演绎", "演奏", "厌恶", "验收", "验证", "氧气", "样品", "谣言", "摇摆", "摇滚", "遥控", "遥远", "要点", "要命", "要素", "耀眼", "野蛮", "野心", "液体", "一度", "一帆风顺", "一贯", "一举两得", "一流", "一目了然", "一如既往", "一丝不苟", "一向", "衣裳", "依旧", "依据", "依靠", "依赖", "依托", "仪器", "仪式", "遗产", "遗传", "遗留", "遗失", "疑惑", "以便", "以免", "以往", "以至", "以致", "亦", "异常", "意料", "意识", "意图", "意味着", "意向", "意志", "毅力", "毅然", "翼", "阴谋", "音响", "引导", "引擎", "引用", "饮食", "隐蔽", "隐患", "隐瞒", "隐私", "隐约", "英明", "英勇", "婴儿", "迎面", "盈利", "应酬", "应邀", "拥护", "拥有", "庸俗", "永恒", "勇于", "涌现", "踊跃", "用户", "优胜劣汰", "优先", "优异", "优越", "忧郁", "犹如", "油腻", "油漆", "有条不紊", "幼稚", "诱惑", "渔民", "愚蠢", "愚昧", "舆论", "与日俱增", "宇宙", "羽绒服", "玉", "预料", "预期", "预算", "预先", "预言", "预兆", "欲望", "寓言", "愈", "冤枉", "元首", "元素", "元宵节", "园林", "原告", "原理", "原始", "原先", "圆满", "缘故", "源泉", "约束", "乐谱", "岳母", "孕育", "运算", "运行", "酝酿", "蕴藏", "熨", "杂技", "杂交", "砸", "咋", "灾难", "栽培", "宰", "再接再厉", "在意", "攒", "暂且", "赞叹", "赞助", "遭受", "遭殃", "遭遇", "糟蹋", "造型", "噪音", "责怪", "贼", "增添", "赠送", "扎", "扎实", "渣", "眨", "诈骗", "摘要", "债券", "沾光", "瞻仰", "斩钉截铁", "展示", "展望", "展现", "崭新", "占据", "占领", "战斗", "战略", "战术", "战役", "章程", "帐篷", "障碍", "招标", "招收", "朝气蓬勃", "着迷", "沼泽", "照样", "照耀", "折腾", "遮挡", "折", "折磨", "侦探", "珍贵", "珍稀", "珍珠", "真理", "真相", "真挚", "斟酌", "枕头", "阵地", "阵容", "振奋", "振兴", "震撼", "震惊", "镇定", "镇静", "正月", "争端", "争夺", "争气", "争先恐后", "争议", "征服", "征收", "挣扎", "蒸发", "整顿", "正当", "正负", "正规", "正经", "正气", "正义", "正宗", "证实", "证书", "郑重", "政策", "政权", "症状", "之际", "支撑", "支出", "支流", "支配", "支援", "支柱", "枝", "知觉", "知足常乐", "脂肪", "执行", "执着", "直播", "直径", "侄子", "值班", "职能", "职位", "职务", "殖民地", "指标", "指定", "指甲", "指令", "指南针", "指示", "指望", "指责", "志气", "制裁", "制服", "制约", "制止", "治安", "治理", "致辞", "致力", "致使", "智力", "智能", "智商", "滞留", "中断", "中立", "中央", "忠诚", "忠实", "终点", "终究", "终身", "终止", "衷心", "肿瘤", "种子", "种族", "众所周知", "种植", "重心", "舟", "州", "周边", "周密", "周年", "周期", "周折", "周转", "粥", "昼夜", "皱纹", "株", "诸位", "逐年", "主办", "主导", "主管", "主流", "主权", "主义", "拄", "嘱咐", "助理", "助手", "住宅", "注射", "注视", "注释", "注重", "驻扎", "著作", "铸造", "拽", "专长", "专程", "专利", "专题", "砖", "转达", "转让", "转移", "转折", "传记", "庄稼", "庄严", "庄重", "装备", "装卸", "壮观", "壮丽", "壮烈", "幢", "追悼", "追究", "坠", "准则", "卓越", "着手", "着想", "着重", "琢磨", "姿态", "资本", "资产", "资深", "资助", "滋润", "滋味", "子弹", "自卑", "自发", "自力更生", "自满", "自主", "宗教", "宗旨", "棕色", "踪迹", "总而言之", "总和", "纵横", "走廊", "走漏", "走私", "揍", "租赁", "足以", "阻碍", "阻拦", "阻挠", "祖父", "祖国", "祖先", "钻研", "钻石", "嘴唇", "罪犯", "尊严", "遵循", "作弊", "作废", "作风", "作息", "座右铭", "做主"]
            }],
            localStorageIdentifier = "memrise-chinese-examples",
            localStorageObject = JSON.parse(localStorage.getItem(localStorageIdentifier)) || jQuery.extend(true, {}, defaultSettings),
            sessionFontSizeScaleFactor = parseFloat(localStorageObject.fontSizeScaleFactor),
            pageNo,
            pageSize = 20,
            pinyinColumnIndex,
            word,
            wordColumnIndex,
            exampleHtml = $([
                "<div class='row column' id='example-html'>",
                "   <div class='row-label'>Sentence",
                "       <a id='next-example' style='cursor: pointer; color: green; display:none'>↻</a>",
                "   </div>",
                "   <div class='row-label' style='top:34px'>",
                "       <a id='previous-example' style='cursor: pointer; color: purple; display:none'>↺</a>",
                "   </div>",
                "   <div class='row-value'>",
                "       <span id='example-audio' style='vertical-align: text-top; cursor: pointer; float: right; display:none'>🔊</span>",
                "       <div class='primary-value'>",
                "           <span id='example-sentence'></span>",
                "           <a id='example-detail-toggle' style='cursor: pointer; color: #AAAAAA; display:none'>+</a>",
                "       </div>",
                "       <div id='example-detail' style='display:none'>",
                "           <div id='pinyin'></div>",
                "           <div id='translation'></div>",
                "       </div>",
                "   </div>",
                "</div>"
            ].join("\n")),
            modalHtml = $([
                "<div class='modal fade' id='example-settings-modal' tabindex='-1' role='dialog' aria-labelledby='example-settings-modal-label'>",
                "   <div class='modal-dialog' role='document'>",
                "       <div class='modal-content'>",
                "           <div class='modal-header'>",
                "               <button type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>×</span></button>",
                "               <h1 class='modal-title' id='example-settings-modal-label'>Example Settings</h1></div>",
                "           <div class='modal-body'>",
                "               <div>",
                "                   <h3>Colours</h3>",
                "                   <table class='table table-striped'>",
                "                       <thead>",
                "                           <tr>",
                "                               <th>Non-HSK</th>",
                "                               <th>HSK 1</th>",
                "                               <th>HSK 2</th>",
                "                               <th>HSK 3</th>",
                "                               <th>HSK 4</th>",
                "                               <th>HSK 5</th>",
                "                               <th>HSK 6</th>",
                "                           </tr>",
                "                       </thead>",
                "                       <tbody>",
                "                           <tr class='picker'>",
                "                               <td>",
                "                                   <button id='non-hsk'></button>", //some sort of button with ▼
                "                               </td>",
                "                               <td>",
                "                                   <button id='hsk-1'></button>",
                "                               </td>",
                "                               <td>",
                "                                   <button id='hsk-2'></button>",
                "                               </td>",
                "                               <td>",
                "                                   <button id='hsk-3'></button>",
                "                               </td>",
                "                               <td>",
                "                                   <button id='hsk-4'></button>",
                "                               </td>",
                "                               <td>",
                "                                   <button id='hsk-5'>",
                "                               </td>",
                "                               <td>",
                "                                   <button id='hsk-6'>",
                "                               </td>",
                "                           </tr>",
                "                       </tbody>",
                "                   </table>",
                "                   <table class='table table-striped'>",
                "                       <thead>",
                "                           <tr>",
                "                               <th>First Tone</th>",
                "                               <th>Second Tone</th>",
                "                               <th>Third Tone</th>",
                "                               <th>Fourth Tone</th>",
                "                               <th>No Tone</th>",
                "                           </tr>",
                "                       </thead>",
                "                       <tbody>",
                "                           <tr class='picker'>",
                "                               <td>",
                "                                   <button id='tone-1'></button>",
                "                               </td>",
                "                               <td>",
                "                                   <button id='tone-2'></button>",
                "                               </td>",
                "                               <td>",
                "                                   <button id='tone-3'></button>",
                "                               </td>",
                "                               <td>",
                "                                   <button id='tone-4'></button>",
                "                               </td>",
                "                               <td>",
                "                                   <button id='tone-5'></button>",
                "                               </td>",
                "                           </tr>",
                "                       </tbody>",
                "                   </table>",
                "                   <hr>",
                "                   <hr>",
                "                   <h3>Colouring</h3>",
                "                   <div class='radio'>",
                "                       <label>",
                "                           <input type='radio' name='colouring-options' value='hsk' checked=''> Hsk colouring </label>",
                "                   </div>",
                "                   <div class='radio'>",
                "                       <label>",
                "                           <input type='radio' name='colouring-options' value='tone'> Tone colouring </label>",
                "                   </div>",
                "                   <div class='radio'>",
                "                       <label>",
                "                           <input type='radio' name='colouring-options' value='none'> No colouring </label>",
                "                   </div>",
                "                   <hr>",
                "                   <h3>Default font size</h3>",
                "                   <div>",
                "                       <input type='range' id='font-range' min='0.8' max='4' step='0.1'>",
                "                       <output id='font-range-label' style='margin-left: 20px'></output>",
                "                   </div>",
                "                   <hr>",
                "                   <h3>Audio speed</h3>",
                "                   <div>",
                "                       <input type='range' id='speed-range' min='0' max='2' step='1'>",
                "                       <output id='speed-range-label' style='margin-left: 20px'></output>",
                "                   </div>",
                "                   <hr>",
                "                   <h3>Underline word</h3>",
                "                   <div>",
                "                      <label>",
                "                       <input id='underline' type='checkbox' style='vertical-align: top'>",
                "                       <output id='underline-label' style='margin-left: 20px'></output>",
                "                      </label>",
                "                   </div>",
                "                   <hr>",
                "                   <div style='font-size: 1.5em; line-height: 1.6em' align='center'>",
                "                       <div id='settings-example-sentence'>",
                "                           <span id='hsk-example'>",
                "                               <span class='non-hsk'>哈利</span>",
                "                               <span class='hsk-1'>的</span>",
                "                               <span class='hsk-1'><strong>爸爸</strong></span>",
                "                               <span class='hsk-2'>非常</span>",
                "                               <span class='hsk-3'>关心</span>",
                "                               <span class='hsk-4'>国际</span>",
                "                               <span class='hsk-5'>进口</span>",
                "                               <span class='hsk-6'>指标</span>",
                "                               <span class='non-hsk'>。</span>",
                "                           </span>",
                "                           <span id='tone-example'>",
                "                               <span class='tone-1'>哈</span>",
                "                               <span class='tone-4'>利</span>",
                "                               <span class='tone-5'>的</span>",
                "                               <span class='tone-4'><strong>爸</strong></span>",
                "                               <span class='tone-5'><strong>爸</strong></span>",
                "                               <span class='tone-1'>非</span>",
                "                               <span class='tone-2'>常</span>",
                "                               <span class='tone-1'>关</span>",
                "                               <span class='tone-1'>心</span>",
                "                               <span class='tone-2'>国</span>",
                "                               <span class='tone-4'>际</span>",
                "                               <span class='tone-4'>进</span>",
                "                               <span class='tone-3'>口</span>",
                "                               <span class='tone-3'>指</span>",
                "                               <span class='tone-1'>标</span>",
                "                               <span class='tone-hsk'>。</span>",
                "                           </span>",
                "                           <span id='none-example'>",
                "                               <span>哈利</span>",
                "                               <span>的</span>",
                "                               <span><strong>爸爸</strong></span>",
                "                               <span>非常</span>",
                "                               <span>关心</span>",
                "                               <span>国际</span>",
                "                               <span>进口</span>",
                "                               <span>指标</span>",
                "                               <span>。</span>",
                "                           </span>",
                "                           <span id='settings-example-audio' style='cursor: pointer; float: right'>🔊</span>",
                "                       </div>",
                "                       <div id='settings-example-detail'>",
                "                           <div>Hālì de <strong>bàba</strong> fēicháng guānxīn guójì jìnkǒu zhǐbiāo.</div>",
                "                           <div>Harry's father takes great interest in international import targets.</div>",
                "                       </div>",
                "                   </div>",
                "                   <hr>",
                "                   <h3>Example difficulties</h3>",
                "                   <div class='radio'>",
                "                       <label>",
                "                           <input type='radio' name='difficulty-options' value='all' checked=''> All </label>",
                "                   </div>",
                "                   <div class='radio'>",
                "                       <label>",
                "                           <input type='radio' name='difficulty-options' value='basic'> Basic only </label>",
                "                   </div>",
                "                   <div class='radio'>",
                "                       <label>",
                "                           <input type='radio' name='difficulty-options' value='intermediate'> Intermediate only </label>",
                "                   </div>",
                "                   <div class='radio'>",
                "                       <label>",
                "                           <input type='radio' name='difficulty-options' value='advanced'> Advanced only </label>",
                "                   </div>",
                "                   <hr>",
                "                   <h3>Word flash</h3>",
                "                   <div>",
                "                      <label>",
                "                       <input id='flash-word' type='checkbox' style='vertical-align: top'>",
                "                       <output id='flash-word-label' style='margin-left: 20px'></output>",
                "                      </label>",
                "                   </div>",
                "                   <hr>",
                "                   <h3>Key bindings</h3>",
                "                   <table id='key-bindings' class='table table-condensed'>",
                "                       <tbody>",
                "                           <tr id='next-example-key'>",
                "                               <th style='width:80%'>",
                "                                   Next example",
                "                               </th>",
                "                               <td class='value' style='width:10%'>",
                "                                   <kbd></kbd>",
                "                               </td>",
                "                               <td class='set-link' style='width:10%'>",
                "                                   <a>Set</a>",
                "                               </td>",
                "                           </tr>",
                "                           <tr id='previous-example-key'>",
                "                               <th style='width:80%'>",
                "                                   Previous example",
                "                               </th>",
                "                               <td class='value' style='width:10%'>",
                "                                   <kbd></kbd>",
                "                               </td>",
                "                               <td class='set-link' style='width:10%'>",
                "                                   <a>Set</a>",
                "                               </td>",
                "                           </tr>",
                "                           <tr id='example-detail-toggle-key'>",
                "                               <th style='width:80%'>",
                "                                   Toggle example details",
                "                               </th>",
                "                               <td class='value'>",
                "                                   <kbd></kbd>",
                "                               </td>",
                "                               <td class='set-link'>",
                "                                   <a>Set</a>",
                "                               </td>",
                "                           </tr>",
                "                           <tr id='increase-font-size-key'>",
                "                               <th style='width:80%'>",
                "                                   Increase font size",
                "                               </th>",
                "                               <td class='value' style='width:10%'>",
                "                                   <kbd></kbd>",
                "                               </td>",
                "                               <td class='set-link' style='width:10%'>",
                "                                   <a>Set</a>",
                "                               </td>",
                "                           </tr>",
                "                           <tr id='decrease-font-size-key'>",
                "                               <th style='width:80%'>",
                "                                   Decrease font size",
                "                               </th>",
                "                               <td class='value' style='width:10%'>",
                "                                   <kbd></kbd>",
                "                               </td>",
                "                               <td class='set-link' style='width:10%'>",
                "                                   <a>Set</a>",
                "                               </td>",
                "                           </tr>",
                "                           <tr id='example-audio-key'>",
                "                               <th style='width:80%'>",
                "                                   Play audio",
                "                               </th>",
                "                               <td class='value' style='width:10%'>",
                "                                   <kbd></kbd>",
                "                               </td>",
                "                               <td class='set-link' style='width:10%'>",
                "                                   <a>Set</a>",
                "                                   </td>",
                "                               </tr>",
                "                       </tbody>",
                "                   </table>",
                "               </div>",
                "           </div>",
                "           <div class='modal-footer'>",
                "               <button type='button' class='btn btn-info pull-left' id='reset-settings-button'>Reset to defaults</button>",
                "               <button type='button' class='btn btn-default' data-dismiss='modal'>Cancel</button>",
                "               <button type='button' class='btn btn-primary' data-dismiss='modal' id='save-settings-button'>Save changes</button>",
                "           </div>",
                "       </div>",
                "   </div>",
                "</div>"
            ].join("\n").replace(/[\t\r\n]/g, ""));

        addToBox("PresentationBox", function(context) {
            setCurrentWord(context);
            resetLocalVars();
            showColouredWord();
            showExample(true);
        });

        addToBox("CopyTypingBox", function(context) {
            setCurrentWord(context);
            if(word !== cachedData.translate) {
                resetLocalVars();
            }
            showColouredWord();
            showExample(true);
        });
        
        _.each(MEMRISE.garden.box_types, function(box_type) {
            if(box_type.prototype instanceof MEMRISE.garden.box_types.TestBox) { 
                box_type.prototype.next_press = (function() {
                    var cached_function = box_type.prototype.next_press;
                    return function() {
                        if(localStorageObject.flashWord !== false) {
                            var wordDetails = setCurrentWord(this);
                            if(wordDetails) {
                                flashWordDetails(wordDetails);
                            }
                        }
                        return cached_function.apply(this, arguments);
                    };
                }());
            }
        });

        setKeyboardEvents();
        loadModal();

        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        function addToBox(boxName, func) {
            MEMRISE.garden.box_types[boxName].prototype.activate = (function() {
                var cached_function = MEMRISE.garden.box_types[boxName].prototype.activate;
                return function() {
                    var result = cached_function.apply(this, arguments);
                    func(this);
                    return result;
                };
            }());
        }

        function colourExamples(examples) {
            switch (localStorageObject.colouring || "hsk") {
                case "hsk":
                    return colourExamplesByHsk(examples);
                case "tone":
                    return colourExamplesByTone(examples);
                case "none":
                    return colourExamplesByNothing(examples);
            }
        }

        function colourExamplesByHsk(examples) {
            _.each(examples, function(example) {
                example.exampleAutolink = _.map($.parseHTML(example.exampleAutolink) || example.exampleAutolink, function(elem) {
                    $(elem).find('[style]').addBack('[style]').removeAttr('style');

                    var level = _.find(hskLevels, function(level) {
                        return level.words.indexOf($(elem).text()) > -1;
                    });

                    switch (level && level.name) {
                        case "HSK 1":
                            return $(elem).css('color', localStorageObject.colours["hsk-1"])[0];
                        case "HSK 2":
                            return $(elem).css('color', localStorageObject.colours["hsk-2"])[0];
                        case "HSK 3":
                            return $(elem).css('color', localStorageObject.colours["hsk-3"])[0];
                        case "HSK 4":
                            return $(elem).css('color', localStorageObject.colours["hsk-4"])[0];
                        case "HSK 5":
                            return $(elem).css('color', localStorageObject.colours["hsk-5"])[0];
                        case "HSK 6":
                            return $(elem).css('color', localStorageObject.colours["hsk-6"])[0];
                        default:
                            return $(elem).css('color', localStorageObject.colours["non-hsk"])[0];
                    }
                });
            });
        }

        function colourExamplesByNothing(examples) {
            _.each(examples, function(example) {
                example.exampleAutolink = _.map($.parseHTML(example.exampleAutolink) || example.exampleAutolink, function(elem) {
                    $(elem).find('[style]').addBack('[style]').removeAttr('style');
                    return $(elem).css('color', "black")[0];
                });
            });
        }

        function colourExamplesByTone(examples) {
            _.each(examples, function(example) {
                var previousCharIsVowel = false,
                    tones = getTones($($.parseHTML(example.pinyin)).text()),
                    toneIndex = 0,
                    isAltForm = tones.filter(function(tone) { //deal with wo3 ai4 ni3 pinyin form
                        return tone === 5;
                    }).length === tones.length;

                if (isAltForm) {
                    tones = (example.pinyin.match(/\d/g) || []).map(function(d) {
                        return Number(d);
                    });
                }

                function colourTone(elem) {
                    var text = $(elem).text();
                    if (isChinese(text)) {
                        previousCharIsVowel = false;
                        if (text.match(/[\u3000-\u303F]+/)) { //ignoring punctuation
                            return $(elem).css('color', localStorageObject.colours["tone-5"] || defaultSettings.colours["tone-5"]).prop('outerHTML');
                        } else if (text === "儿" && !isAltForm) { //accounting for sneaky 儿话音
                            if (tones[toneIndex] === "ér") {
                                tones[toneIndex] = 2;
                            } else if (tones[toneIndex] === "er") {
                                tones[toneIndex] = 5;
                            } else {
                                return $(elem).css('color', localStorageObject.colours["tone-5"] || defaultSettings.colours["tone-5"]).prop('outerHTML');
                            }
                        }
                        switch (tones[toneIndex++]) {
                            case 1:
                                return $(elem).css('color', localStorageObject.colours["tone-1"] || defaultSettings.colours["tone-1"]).prop('outerHTML');
                            case 2:
                                return $(elem).css('color', localStorageObject.colours["tone-2"] || defaultSettings.colours["tone-2"]).prop('outerHTML');
                            case 3:
                                return $(elem).css('color', localStorageObject.colours["tone-3"] || defaultSettings.colours["tone-3"]).prop('outerHTML');
                            case 4:
                                return $(elem).css('color', localStorageObject.colours["tone-4"] || defaultSettings.colours["tone-4"]).prop('outerHTML');
                            case 5:
                                return $(elem).css('color', localStorageObject.colours["tone-5"] || defaultSettings.colours["tone-5"]).prop('outerHTML');
                            default:
                                return $(elem).css('color', localStorageObject.colours["tone-5"] || defaultSettings.colours["tone-5"]).prop('outerHTML');
                        }
                    } else {
                        //increment the tone index if char is a vowel and the prev char was not
                        if (text.toLowerCase().match(/[aeiou]/)) {
                            if (!previousCharIsVowel) {
                                toneIndex++;
                            }
                            previousCharIsVowel = true;
                        } else {
                            previousCharIsVowel = false;
                        }
                        return $(elem).css('color', localStorageObject.colours["tone-5"] || defaultSettings.colours["tone-5"]).prop('outerHTML');
                    }
                }

                example.exampleAutolink = _.map($.parseHTML(example.exampleAutolink) || example.exampleAutolink, function(elem) {
                    $(elem).find('[style]').addBack('[style]').removeAttr('style');
                    if (!$(elem).get(0).tagName) {
                        elem = $.parseHTML("<span>" + $(elem).text() + "</span>");
                    }
                    return $(elem).html(function(i, html) {
                        html = html || $(this).text();
                        //wrap non-angle bracket stuff in colour styled spans
                        return html.replace(/<[^>]+>|([^<]+?)/g, function(match, capture) {
                            if (capture) {
                                return colourTone($.parseHTML("<span>" + capture + "</span>"));
                            } else {
                                return match;
                            }
                        });
                    });
                });
            });
        }

        function colourUnderlines(examples) {
            _.each(examples, function(example) {
                example.exampleAutolink = _.map($.parseHTML(example.exampleAutolink) || example.exampleAutolink, function(elem) {
                    $(elem).find('u').css('color', function() {
                        return $(this).find('[style]').css('color');
                    });
                    return elem;
                });
            });
        }
        
        function flashWordDetails(wordDetails) {
            var flashDuration = 2000,
                summary,
                wordLength = $(wordDetails.exampleAutolink).text().length,
                wordFontSize = Math.floor(100 / wordLength) + 'px';
            summary = $(colouredWord[0]).html(function(i, html) {
                return '<div style="font-size: ' + wordFontSize + ';line-height: ' + wordFontSize + ';">' + html + '</div><div style="font-size: ">' + wordDetails.pinyin + '</div>';
            });
            flashElement.hide().removeClass("animated");
            $.doTimeout(100, function() {
                flashElement.html(summary).show().addClass("animated");
                flashLoadCount++;
            });
            $.doTimeout(flashDuration, function() {
                if(--flashLoadCount === 0) {
                    flashElement.hide().removeClass("animated");
                }
            });
        }

        function getTones(example) {
            var tones = [],
                regex = new RegExp("[āáǎàaēéěèeīíǐìiōóǒòoūúǔùuǖǘǚǜü]+[^āáǎàaēéěèeīíǐìiōóǒòoūúǔùuǖǘǚǜü]*", "g"), // * -> so we can then account for 儿话音
                matches = example.toLowerCase().match(regex);

            _.each(matches, function(m) {
                if (m.startsWith("ér")) { //later on we'll need this to check for 儿话音 
                    tones.push("ér");
                } else if (m.match(/^er[\s.,]/)) { //the pinyin for 儿 is sometimes given
                    tones.push("er");
                } else if (m.match(/[āēīōūǖ]/)) {
                    tones.push(1);
                } else if (m.match(/[áéíóúǘ]/)) {
                    tones.push(2);
                } else if (m.match(/[ǎěǐǒǔǚ]/)) {
                    tones.push(3);
                } else if (m.match(/[àèìòùǜ]/)) {
                    tones.push(4);
                } else {
                    tones.push(5);
                }
            });

            return tones;
        }

        function getUrl(wordURI, pageNo) {
            return "http://linedict.naver.com/cnen/example/search.dict?query=" +
                wordURI + "&page=" + pageNo + "&page_size=" + pageSize + "&format=json" + difficulties[localStorageObject.difficulty];
        }

        function initialiseFontSizes() {
            setExampleFontSize(sessionFontSizeScaleFactor);
            setModalFontSize(localStorageObject.fontSizeScaleFactor);
        }

        function isChinese(input) {
            return typeof(input) === "string" && input.match(/^[\u2E80-\u2EFF\u3000-\u303F\u31C0-\u31EF\u3300-\u33FF\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFAFF\uFE30-\uFE4F]+/); //unicode ranges for Chinese
        }

        function loadModal() {
            $("body").append(modalHtml);
            var settingsObject = jQuery.extend(true, {}, localStorageObject);
            setModalEvents(settingsObject);
            setModalFields(settingsObject);
        }

        function loadDOM() {
            console.log("loading example sentence DOM for word " + word);
            exampleHtml.find('#example-sentence, #pinyin, #translation').html("");
            $('.columns').append(exampleHtml);
            shiftShowMoreLink();
            setClickEvents();
            if (firstTimeLoad) {
                initialiseFontSizes();
                firstTimeLoad = false;
            }
        }

        function onDataLoaded(data) {
            data.exampleList = _.shuffle(data.exampleList);
            colourExamples(data.exampleList);
            if (localStorageObject.underlineWord) {
                toggleUnderlines(data.exampleList);
                colourUnderlines(data.exampleList);
            }
            if (!cachedData) {
                cachedData = data;
            } else if (data.exampleList) {
                Array.prototype.push.apply(cachedData.exampleList, data.exampleList);
            }
        }

        function playAudio(word, speed) {
            var audioElement = document.createElement('audio');
            var audioLink = 'http://tts.cndic.naver.com/tts/mp3ttsV1.cgi?spk_id=250&text_fmt=0&pitch=100&volume=100&speed=' + 80 * speed + '&wrapper=0&enc=0&text=' +
                encodeURIComponent(word);
            audioElement.setAttribute('src', audioLink);
            audioElement.play();
            audioPlaying = true;
            $(audioElement).on('ended', function() {
                audioPlaying = false;
            });
        }

        function renderExample() {
            var example = cachedData.exampleList[exampleIndex] || "";
            $('#example-sentence').html(example.exampleAutolink);
            $('#pinyin').html(example.pinyin);
            $('#translation').html(example.translation);

            $('#previous-example').toggle(exampleIndex > 0);
            $('#next-example').toggle(exampleIndex + 1 < cachedData.total);
            $('#example-detail-toggle').toggle(!!example);
            $('#example-audio').toggle(!!example);
        }

        function resetLocalVars() {
            cachedData = undefined;
            exampleIndex = 0;
            pageNo = 0;
        }

        function scaleElementFontSize(selector, scaleFactor) {
            $(selector).css('font-size', function() {
                var defaultSize = parseFloat($(this).parent().css('font-size'));
                return (defaultSize * scaleFactor) + 'px';
            }).css('line-height', function() {
                var defaultSize = parseFloat($(this).parent().css('line-height'));
                return (defaultSize * scaleFactor) + 'px';
            });
        }

        function setClickEvents() {
            $('#example-detail-toggle').click(function() {
                $('#example-detail-toggle')
                    .text($('#example-detail').is(':hidden') ? '-' : '+');
                $('#example-detail').toggle();
            });
            $('#next-example').click(function() {
                exampleIndex++;
                showExample();
            });
            $('#previous-example').click(function() {
                exampleIndex--;
                showExample();
            });
            $('#example-audio').click(function() {
                if (audioPlaying) {
                    return;
                } else {
                    playAudio(cachedData.exampleList[exampleIndex].example, localStorageObject.audioSpeed);
                }
            });
        }
        
        function setCurrentWord(context) {
            var columns = context.thing.columns,
                columnsGeneral = context.pool.columns;
            
            wordColumnIndex = _.findKey(columns, function(column) {
                return isChinese(column.val);
            });

            if(wordColumnIndex) {
                word = columns[wordColumnIndex].val;
                pinyinColumnIndex = _.findKey(columnsGeneral, function(column) {
                    return column.label.toLowerCase().match(/pinyin|pronunciation/i);
                });

                if(pinyinColumnIndex) {
                    var exampleFormat = [{
                        pinyin: columns[pinyinColumnIndex].val,
                        exampleAutolink: '<span>' + word + '</span>'
                    }];
                    colourExamplesByTone(exampleFormat);
                    colouredWord = exampleFormat[0].exampleAutolink;
                    return exampleFormat[0];
                }
            }
        }

        function setExampleFontSize(scaleFactor) {
            scaleElementFontSize("#example-sentence", scaleFactor);
            scaleElementFontSize("#example-detail", 0.7 * scaleFactor);
            scaleElementFontSize("#example-detail-toggle", 0.7 * scaleFactor);
        }

        function setKeyboardEvents() {
            $(document).on("keypress.example", function(e) {
                if (!$(e.target).is("input, textarea")) {
                    if ($('#example-sentence').length > 0) {
                        var key = _.findKey(localStorageObject.keyBindings, function(value) {
                                return value === e.which;
                            }),
                            methods = {
                                "next-example-key": function() {
                                    if ($('#next-example').is(':visible')) {
                                        $('#next-example').click();
                                    }
                                },
                                "previous-example-key": function() {
                                    if ($('#previous-example').is(':visible')) {
                                        $('#previous-example').click();
                                    }
                                },
                                "example-detail-toggle-key": function() {
                                    $('#example-detail-toggle').click();
                                },
                                "increase-font-size-key": function() {
                                    sessionFontSizeScaleFactor += 0.1;
                                    setExampleFontSize(sessionFontSizeScaleFactor);
                                },
                                "decrease-font-size-key": function() {
                                    sessionFontSizeScaleFactor -= 0.1;
                                    setExampleFontSize(sessionFontSizeScaleFactor);
                                },
                                "example-audio-key": function() {
                                    $('#example-audio').click();
                                },
                            };

                        if (key) {
                            methods[key]();
                            e.preventDefault();
                        }
                    }
                }
            });
        }

        function setModalEvents(settingsObject) {
            //modal show/hide
            $('#example-settings-modal').on('shown.bs.modal', function() {
                $(document).off('focusin.modal'); //enable focus events on modal
                $(document).off("keypress.example"); //disable keyboard shortcuts
            });

            $('#example-settings-modal').on('hide.bs.modal', function() {
                settingsObject = jQuery.extend(true, {}, localStorageObject);
                setModalFields(settingsObject);
                setKeyboardEvents();
            });

            //colours
            $('.picker button').colorPicker({
                renderCallback: function($elm, toggled) {
                    if ($elm.parents('.picker').length) {
                        var id = $elm.attr('id'),
                            newColour = $elm.css('background-color');
                        settingsObject.colours[id] = newColour;
                        $('.' + id).css('color', newColour);
                    }
                },
                buildCallback: function($elm) {
                    $('.cp-color-picker').css('z-index', 2000); //bring to front
                },
            });

            $('.radio input[name=colouring-options]').change(function() {
                if ($(this).is(':checked')) {
                    var choice = $(this).val();
                    settingsObject.colouring = choice;
                    $('#hsk-example, #tone-example, #none-example').each(function() {
                        var parsedId = $(this).attr('id').replace('-example', '');
                        $(this).toggle(choice === parsedId);
                    });
                }
            });

            //font size
            $('#font-range')[0].oninput = function() {
                var scaleFactor = $(this).val();
                settingsObject.fontSizeScaleFactor = scaleFactor;
                $('#font-range-label').text(scaleFactor + 'x');
                setModalFontSize(scaleFactor);
            };

            //audio Speed
            $('#speed-range')[0].oninput = function() {
                var speed = parseInt($(this).val(), 10);
                switch (speed) {
                    case 0:
                        settingsObject.audioSpeed = 0.2;
                        $('#speed-range-label').text("Slow");
                        break;
                    case 1:
                        settingsObject.audioSpeed = 1;
                        $('#speed-range-label').text("Normal");
                        break;
                    case 2:
                        settingsObject.audioSpeed = 2.5;
                        $('#speed-range-label').text("Fast");
                        break;
                }
            };

            $('#settings-example-audio').click(function() {
                playAudio($('#settings-example-sentence #hsk-example').text(), settingsObject.audioSpeed);
            });

            //Underline
            $('#underline').change(function() {
                var example = $('#settings-example-sentence'),
                    exampleUnderlined = !!$('#settings-example-sentence u').length;

                settingsObject.underlineWord = $(this).is(':checked');
                if (settingsObject.underlineWord !== exampleUnderlined) {
                    toggleUnderline(example);
                }
                $('#underline-label').text(settingsObject.underlineWord ? "Underlined" : "Not underlined");
            });

            //example difficulties
            $('.radio input[name=difficulty-options]').change(function() {
                if ($(this).is(':checked')) {
                    settingsObject.difficulty = $(this).val();
                }
            });

            //Word flash 
            $('#flash-word').change(function() {
                settingsObject.flashWord = $(this).is(':checked');
                $('#flash-word-label').text(settingsObject.flashWord ? "On" : "Off");
            });

            //key bindings
            $('.set-link').click(function(setEvent) {
                $(document).off("keypress.example");
                var element = $(this).parent().find('.value');
                var initialValue = element.text();
                element.html('<input type="text" style="width:35px;height:20px;margin:0px" maxlength="1">');
                element.find('input').focus();

                var inputPending = true;
                setEvent.stopPropagation();

                $(document).click(function(event) {
                    onInput(event);
                });
                $(document).keypress(function(event) {
                    onInput(event);
                });

                function onInput(e) {
                    if (inputPending) {
                        var id = element.parent().attr('id');
                        element.html('<kbd></kbd>');
                        var invalidChars = _.where(settingsObject.keyBindings, function(val, key) {
                            return key.toString() !== id;
                        }).concat(13);
                        var char = (e.type === "keypress" && !_.contains(invalidChars, e.which)) ? String.fromCharCode(e.which) : initialValue;
                        element.find('kbd').text(char);
                        e.stopPropagation();
                        inputPending = false;
                        settingsObject.keyBindings[element.parent().attr('id')] = char.charCodeAt(0);
                    }
                    $(this).off(e);
                }
            });

            //button click events
            $('#save-settings-button').click(function() {
                var shouldReloadExamples = settingsObject.difficulty !== localStorageObject.difficulty;
                var shouldToggleUnderline = settingsObject.underlineWord !== localStorageObject.underlineWord;
                localStorage.setItem(localStorageIdentifier, JSON.stringify(settingsObject));
                localStorageObject = jQuery.extend(true, {}, settingsObject);
                if (shouldReloadExamples) {
                    $('#example-html').remove();
                    resetLocalVars();
                    showExample(true);
                } else {
                    colourExamples(cachedData.exampleList);
                    if (shouldToggleUnderline) {
                        toggleUnderlines(cachedData.exampleList);
                    }
                    colourUnderlines(cachedData.exampleList);
                    showExample();
                }
                sessionFontSizeScaleFactor = parseFloat(localStorageObject.fontSizeScaleFactor);
                setExampleFontSize(sessionFontSizeScaleFactor);
            });
            $('#reset-settings-button').click(function() {
                settingsObject = jQuery.extend(true, {}, defaultSettings);
                setModalFields(settingsObject);
            });
        }

        function setModalFields(settingsObject) {
            //colours
            _.each($('.picker button'), function(elem) {
                var id = $(elem).attr('id');
                $(elem).css('background-color', settingsObject.colours[id] || defaultSettings.colours[id]);
                $('.' + id).css('color', settingsObject.colours[id] || defaultSettings.colours[id]);
            });

            $('.radio input[name=colouring-options][value=' + settingsObject.colouring + ']').prop('checked', true).change();

            //font size
            $('#font-range').prop('value', settingsObject.fontSizeScaleFactor)[0].oninput();

            //audio speed
            $('#speed-range').prop('value', settingsObject.audioSpeed)[0].oninput();

            //underline
            $('#underline').prop('checked', settingsObject.underlineWord).change();

            //example difficulties
            $('.radio input[name=difficulty-options][value=' + settingsObject.difficulty + ']').prop('checked', true);

            //word flash
            $('#flash-word').prop('checked', settingsObject.flashWord !== false).change();
            
            //key bindings
            _.each($('table#key-bindings tr'), function(tr) {
                var id = $(tr).attr('id');
                var char = String.fromCharCode(settingsObject.keyBindings[id]);
                $(tr).find('td.value kbd').text(char);
            });
        }

        function setModalFontSize(scaleFactor) {
            scaleElementFontSize("#settings-example-sentence", scaleFactor);
            scaleElementFontSize("#settings-example-detail", 0.7 * scaleFactor);
        }

        function shiftShowMoreLink() {
            $('.show-more-link').css("right", "-80px");
        }
        
        function showColouredWord() {
            if (pinyinColumnIndex) {
                $('.garden-box .column[data-column-index=' + wordColumnIndex + '] .primary-value').html(colouredWord);
            }
        }

        function showExample(shouldLoadDOM) {
            function updateDOM() {
                if (shouldLoadDOM) {
                    loadDOM();
                }
                renderExample();
            }

            var fetchMoreExamples = !cachedData || (cachedData.total > 0) && (exampleIndex === cachedData.exampleList.length);
            if (fetchMoreExamples) {
                pageNo++;
                $("#next-example").hide();
                var url = getUrl(encodeURIComponent(word), pageNo);
                console.log("fetching examples from LINE dictionary, url = " + url);
                $.get(url, function(data) {
                    console.log("examples fetched, total number of examples: " + data.total);
                    onDataLoaded(data);
                    updateDOM();
                }, "jsonp");
            } else {
                updateDOM();
            }
        }

        function toggleUnderline(element) {
            $(element).find('u >').unwrap()[0] || $(element).find(':not(:has(*))').filter(function() {
                return $(this).get(0).tagName === "STRONG" || $(this).parent().get(0).tagName === "STRONG"; //either strong elements or their childless children
            }).wrap('<u></u>');
            return element;
        }

        function toggleUnderlines(examples) {
            _.each(examples, function(example) {
                example.exampleAutolink = _.map($.parseHTML(example.exampleAutolink) || example.exampleAutolink, function(elem) {
                    return toggleUnderline(elem);
                });
            });
        }
    }
}());
